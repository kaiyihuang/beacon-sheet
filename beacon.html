<head>
	<meta charset="UTF-8">
	<link rel="stylesheet" type="text/css" href="styles.css">
</head>
<body>
<input type="hidden" class="sheet-tabstoggle" name="attr_sheetTab"  value="character">
<div class="tab-buttons middle center">
  <button type="action" name="act_character">Character</button>
  <button type="action" name="act_gen">General Rules</button>
  <button type="action" name="act_npc">NPC</button>
</div>


<main class="sheet-character">

    <section class="header f-center">
        <img src="https://cdn.discordapp.com/attachments/1007928324217114695/1073056431802159114/BEACON_Cover5.jpg" style="width: auto; height: auto;" alt="Beacon RPG Logo">
      </section>

<section class="skill">
    <span>Name<input name="attr_character_name" type="text" style="width: 30%"></span><span>Ancestry</span>
    <select name="attr_ancestry" style="width: 25%">
        <option value="Avian">Avian</option>
        <option value="Cambion">Cambion</option>
        <option value="Dragonborn">Dragonborn</option>
        <option value="Dwarf">Dwarf</option>
        <option value="Elemental">Elemental</option>
        <option value="Elf">Elf</option>
        <option value="Gigan">Gigan</option>
        <option value="Gnome">Gnome</option>
        <option value="Goblin">Goblin</option>
        <option value="Halfling">Halfling</option>
        <option value="Human">Human</option>
        <option value="Kobold">Kobold</option>
        <option value="Lycanthrope">Lycanthrope</option>
        <option value="Machina">Machina</option>
        <option value="Orc">Orc</option>
        <option value="Custom">Custom</option></select>
        <br>
    <span>Level</span><input name="attr_level" type="number" value="1" min="1" max="12" title="Enter the character's level">
    <span>Grit</span><input name="attr_grit" type="number" value="0" min="0" max="6" title="Enter the character's grit level">
    <span>Active Job</span>
    <select name="attr_job" style="width: 30%">
        <option value="Aegis">Aegis</option>
        <option value="Alchemist">Alchemist</option>
        <option value="Arsenal">Arsenal</option>
        <option value="Assassin">Assassin</option>
        <option value="Berserker">Berserker</option>
        <option value="Chronomancer">Chronomancer</option>
        <option value="Demon_Hunter">Demon Hunter</option>
        <option value="Demonologist">Demonologist</option>
        <option value="Dragon_Rider">Dragon Rider</option>
        <option value="Druid">Druid</option>
        <option value="Equinox">Equinox</option>
        <option value="Gravewalker">Gravewalker</option>
        <option value="Gunslinger">Gunslinger</option>
        <option value="Hexblade">Hexblade</option>
        <option value="Knightmare">Knightmare</option>
        <option value="Lifeweaver">Lifeweaver</option>
        <option value="Paladin">Paladin</option>
        <option value="Phoenix">Phoenix</option>
        <option value="Riftblade">Riftblade</option>
        <option value="Rimeguard">Rimeguard</option>
        <option value="Seeker">Seeker</option>
        <option value="Shadebinder">Shadebinder</option>
        <option value="Shadow_Dancer">Shadow Dancer</option>
        <option value="Shapeshifter">Shapeshifter</option>
        <option value="Skald">Skald</option>
        <option value="Thunderclaw">Thunderclaw</option>
        <option value="Tidecaller">Tidecaller</option>
        <option value="Warden">Warden</option>
        <option value="Warlord">Warlord</option>
    </select>
    <br>
    <div class="f-row nowrap">
        <span class="sheet-tooltip">
            <strong>Bulk</strong>
            <span class="sheet-tooltip-text">
                <p>Bulk affects the following statistics</p>
                <ul>
                  <li>+2 HP for every point of Bulk</li>
                  <li>+1 Recovery for every two points of Bulk</li>
            </span>
          </span>        
        <button type="roll" style="margin-left: 5px;" name="roll_bulk" value="&{template:default} {{title=bulk}}   {{roll= [[1d20+@{bulk} +?{Accuracy/Difficulty|0}d6k1]]}}"> </button> 
        <input type="number" style="margin: 0px;" name="attr_bulk" value="0" min="0" max="6" step="1">
 
      </div>
      <div class="f-row nowrap">
        <span class="sheet-tooltip">
            <strong>Agility</strong>
            <span class="sheet-tooltip-text">
                <p>Agility affects the following statistics</p>
                <ul>
                  <li>+1 Dodge for every point of Agility</li>
                  <li>+1 Speed for every two points of Agility</li>
            </span>
          </span>     
        <button type="roll" style="margin-left: 5px;" name="roll_agility" value="&{template:default} {{title=agility}}   {{roll= [[d20+@{agility}[agility] +?{Accuracy/Difficulty|0}d6k1 ]]}}"> </button>
        <input type="number" style="margin: 0px;" name="attr_agility" value="0" min="0" max="6" step="1">

      </div>
      <div class="f-row nowrap">
        <span class="sheet-tooltip">
            <strong>Mind</strong>
            <span class="sheet-tooltip-text">
                <p>Mind affects the following statistics</p>
                <ul>
                  <li>+1 Stress for every point of Mind</li>
                  <li>+1 Memory for every two points of Mind</li>
            </span>
          </span>     
        <button type="roll" style="margin-left: 5px;" name="roll_mind" value="&{template:default} {{title=mind}}   {{roll= [[d20+@{mind}[mind] +?{Accuracy/Difficulty|0}d6k1 ]]}}"> </button>
        <input type="number" style="margin: 0px;" name="attr_mind" value="0" min="0" max="6" step="1">

      </div>
      <div class="f-row nowrap">
        <span class="sheet-tooltip">
            <strong>Magic</strong>
            <span class="sheet-tooltip-text">
                <p>Magic affects your statistics in the following ways:</p>
                <ul>
                    <li>+1 A-Def for every point of Magic</li>
                    <li>+1 Mana for every two points of Magic</li>
            </span>
          </span>     
        <button type="roll" style="margin-left: 5px;" name="roll_magic" value="&{template:default} {{title=magic}}   {{roll= [[d20+@{magic}[magic] +?{Accuracy/Difficulty|0}d6k1 ]]}}"> </button>   
        <input type="number" style="margin: 0px;" name="attr_magic" value="0" min="0" max="6" step="1"></div>
        <span>Armor<input type="number" name="attr_armor" value="0" min="0" max="99"></span>
        <span>Dodge<input name="attr_dodge" type="hidden" value="0" min="0" max="99"><input name="attr_dodge_max" type="number" value="0" min="0" max="99" title="Enter the character's maximum dodge value"></span>
        <span>A-Defense<input name="attr_a_def" type="number" value="0" min="0" max="99" title="Enter the character's A-Defense value"></span>
        <span>Size<input name="attr_size" type="number" value="1" min="1" max="5" title="Enter the character's size"></span>
        <span>S-Target<input name="attr_save_max" type="number" value="0" min="0" max="99" title="Enter the character's maximum save target value"><input name="attr_save" type="hidden" value="0" min="0" max="99"></span>
        <span>Scope<input name="attr_scope" type="number" value="0" min="0" max="99" title="Enter the character's scope value"></span>
        <span>Memory<input type="number" name="attr_memory_max" value="0" min="0" max="99"></span>
        <span>Speed<input name="attr_speed_max" type="number" value="0" min="0" max="99" title="Enter the character's maximum speed value"><input name="attr_speed" type="hidden" value="0" min="0" max="99"></span>
   </section>

    <section class="stats common">

    </section>

    <section class="ult">
        <span class="sheet-tooltip">
            <span><h3>Limit Break</h3></span>
            <span class="sheet-tooltip-text">
                <p>Each beacon can use one limit break per quest. If a
                    beacon uses a limit break from one job, and later
                    changes jobs within the same quest, they don’t get
                    to use the new job’s limit break. They’ve already 
                    used their one limit break that quest.</p>
                <p>Beacons regain the ability to use a limit break after a
                    Long Rest. </p>
            </span>
          </span>  
        <button type="roll" name="roll_anc" value="&{template:default} {{Name=@{lb_name}}} {{Description=@{lb_info}}}"></button>
        <Label>Name <input type=text class=text160 name="attr_lb_name" ></label>
        <div class="sheet-body">
            <textarea name="attr_lb_info" style="resize: none; width: 97%; height: 125px;">
        </div>
      </section>

  <section class="bars">
    <table class="b">
        <tr class="b">

        </tr>
        <tr class="b">
            <td class="b"><div>Temp HP</div><input type="number" name="attr_temphp" value="0" min="0" max="99"></td>
            <td class="b"><div>Focus</div><input type="number" name="attr_focus" value="0" min="0" max="99"></td>
        </tr>
        
       <br><tr class="b">
            <td class="b"><div>HP</div><input type="number" name="attr_hp" value="0" min="0" max="99"><span>/</span><input type="number" name="attr_hp_max" value="0" min="0" max="99" ></td>
            <td class="b"><div>Wounds</div><input type="number" name="attr_wound" value="4" min="0" max="4"><span>/</span><input type="number" name="attr_wound_max" value="4" min="0" max="4" readonly></span></td>
        </tr>
        
        <br><tr class="b">
            <td class="b"><div>Stress</div><input type="number" name="attr_stress" value="0" min="0" max="99">/<input type="number" name="attr_stress_max" value="0" min="0" max="99" ></td>
            <td class="b"><div>Overstress</div><input type="number" name="attr_overstress" value="4" min="0" max="4"><span>/</span><input type="number" name="attr_overstress_max" value="4" min="0" max="4" readonly></span></td>
        </tr>
        
        <br><tr class="b">
            <td class="b"><div>Mana</div><input type="number" name="attr_mana" value="0" min="0" max="99">/<input type="number" name="attr_mana_max" value="0" min="0" max="99" ></td>
            <td class="b"><div>Recoveries</div><input type="number" name="attr_recoveries" value="0" min="0" max="99">/<input type="number" name="attr_recoveries_max" value="0" min="0" max="99" ></td>
        </tr>
      </table>
  </section> 
  <section class="attack">
    <strong><h3 class="method2">Weapon & Spell Attacks</h3></strong>
    <strong>(Weapon Slot Information)</strong>    
       <div><span><input name="attr_slotsize1" type="text" placeholder="~ List Your Slot Sizes ~" style="width: 40%;"><select type="text" style="width: 14%;"><option value="Unlinked"></option><option value="Linked">🔗</option></select><span><input name="attr_slotsize2" type="text" placeholder="~ List Your Slot Sizes ~" style="width: 40%;"></span><br>
        <span><input name="attr_slotsize3" type="text" style="width: 40%;"><select type="text" style="width: 14%;"><option value="Unlinked"></option><option value="Linked">🔗</option></select> <span><input name="attr_slotsize4" type="text" style="width: 40%;"></span><br>
        <span><input name="attr_slotsize5" type="text" style="width: 40%;"><select type="text" style="width: 14%;"><option value="Unlinked"></option><option value="Linked">🔗</option></select> <span><input name="attr_slotsize6" type="text" style="width: 40%;"></span><br></div>

        <strong>(Weapon Input Instructions)</strong><input type="checkbox" class="sheet-toggle-showb" style="margin-left: 4px;">
        <div class="sheet-bodyb">
            <textarea type="text" readonly style="resize: none; width: 97%; height: 90px; margin-bottom: -20px;">Make sure the Name of a Weapon or Spell is spelled correctly inside the {Name} tab, however it is not case or space sensitive.
  *Example A: Sword, sword, and sWoRd (✅)
  *Example B: Forbidden Tome and ForbiddenTome (✅)
  *Example C: Sord and Forbiden Tom (❌)</textarea></div>
    <br> 
    <input type="checkbox" class="sheet-toggle-show1">
    <button type="roll" name="roll_attack1" style="margin-left: -1px;" value="&{template:default} {{title=@{slots1}}} {{Type=@{attacktype1}}} {{Range=@{attackrange1}}} {{Tags=@{attacktags1}}} {{To Hit= [[1d20+@{hitbonus1}+@{grit} +?{Accuracy/Difficulty|0}d6k1]]}} {{Damage=[[@{attackdamage1}]] @{damagetype1}}} {{Effect=@{attackeffects1}}}"></button>
    <input type="text" placeholder="{Name}" name="attr_slots1" value="" style="width: 28%; margin-left: -2px;">
    <div class="sheet-body1">
    <span>Type<input type="text" name="attr_attacktype1" value="" style="width: 25%;"></span><span>Range<input type="text" name="attr_attackrange1" value="" style="width: 20%;"></span><span>Hit Bonus<input type="text" name="attr_hitbonus1" value="0" style="width: 10%"></span><br>
    <span>Damage<input type="text" name="attr_attackdamage1" value="" style="width: 15%"></span><span>D.Type<input type="text" name="attr_damagetype1" value="" style="width: 15%"></span><span>Tags<input type="text" name="attr_attacktags1" value="" style="width: 35%;"></span><br>
    Description or Effects? <input type="checkbox" class="sheet-toggle-show1"><br>
    <div class="sheet-body1">
    <textarea class=textAtks name="attr_attackeffects1" value="" style="width: 90%; height: 75px; resize: none;"></textarea></div>
    </div>
    </div>
    <select name="linked" type="text" list="linked" class=linkedBox style="width: 13%; text-align:left; margin-right: 4px;">
        <option value="Unlinked"></option>
        <option value="Linked">🔗</option>
        </select>
    <button type="roll" name="roll_attack2" style="margin-left: -1px;" value="&{template:default} {{title=@{slots2}}} {{Type=@{attacktype2}}} {{Range=@{attackrange2}}} {{Tags=@{attacktags2}}} {{To Hit= [[1d20+@{hitbonus2}+@{grit} +?{Accuracy/Difficulty|0}d6k1]]}} {{Damage=[[@{attackdamage2}]] @{damagetype2}}} {{Effect=@{attackeffects2}}}"></button>
    <input type="text" placeholder="{Name}" name="attr_slots2" value="" style="width: 29%; margin-left: -2px;">
    <input type="checkbox" class="sheet-toggle-show2" style="margin-left: -4px;">
    <div class="sheet-body2">
    <span>Type<input type="text" name="attr_attacktype2" value="" style="width: 25%;"></span><span>Range<input type="text" name="attr_attackrange2" value="" style="width: 20%;"></span><span>Hit Bonus<input type="text" name="attr_hitbonus2" value="0" style="width: 10%"></span><br>
    <span>Damage<input type="text" name="attr_attackdamage2" value="" style="width: 15%"></span><span>D.Type<input type="text" name="attr_damagetype2" value="" style="width: 15%"></span><span>Tags<input type="text" name="attr_attacktags2" value="" style="width: 35%;"></span><br>
    Description or Effects? <input type="checkbox" class="sheet-toggle-show2"><br>
    <div class="sheet-body2">
    <textarea class=textAtks name="attr_attackeffects2" value="" style="width: 90%; height: 75px; resize: none;"></textarea></div>
    </div>
    </div>
    <input type="checkbox" class="sheet-toggle-show3">
    <button type="roll" name="roll_attack3" style="margin-left: -1px;" value="&{template:default} {{title=@{slots3}}} {{Type=@{attacktype3}}} {{Range=@{attackrange3}}} {{Tags=@{attacktags3}}} {{To Hit= [[1d20+@{hitbonus3}+@{grit} +?{Accuracy/Difficulty|0}d6k1]]}} {{Damage=[[@{attackdamage3}]] @{damagetype3}}} {{Effect=@{attackeffects3}}}"></button>
    <input type="text" placeholder="{Name}" name="attr_slots3" value="" style="width: 28%; margin-left: -2px;">
    <div class="sheet-body3">
    <span>Type<input type="text" name="attr_attacktype3" value="" style="width: 25%;"></span><span>Range<input type="text" name="attr_attackrange3" value="" style="width: 20%;"></span><span>Hit Bonus<input type="text" name="attr_hitbonus3" value="0" style="width: 10%"></span><br>
    <span>Damage<input type="text" name="attr_attackdamage3" value="" style="width: 15%"></span><span>D.Type<input type="text" name="attr_damagetype3" value="" style="width: 15%"></span><span>Tags<input type="text" name="attr_attacktags3" value="" style="width: 35%;"></span><br>
    Description or Effects? <input type="checkbox" class="sheet-toggle-show3"><br>
    <div class="sheet-body3">
    <textarea class=textAtks name="attr_attackeffects3" value="" style="width: 90%; height: 75px; resize: none;"></textarea></div>
    </div>
    </div>
    <select name="linked" type="text" list="linked" class=linkedBox style="width: 13%; text-align:left; margin-right: 4px;">
        <option value="Unlinked"></option>
        <option value="Linked">🔗</option>
        </select>
    <button type="roll" name="roll_attack4" style="margin-left: -1px;" value="&{template:default} {{title=@{slots4}}} {{Type=@{attacktype4}}} {{Range=@{attackrange4}}} {{Tags=@{attacktags4}}} {{To Hit= [[1d20+@{hitbonus4}+@{grit} +?{Accuracy/Difficulty|0}d6k1]]}} {{Damage=[[@{attackdamage4}]] @{damagetype4}}} {{Effect=@{attackeffects4}}}"></button>
    <input type="text" placeholder="{Name}" name="attr_slots4" value="" style="width: 29%; margin-left: -2px;">
    <input type="checkbox" class="sheet-toggle-show4" style="margin-left: -4px;">
    <div class="sheet-body4">
    <span>Type<input type="text" name="attr_attacktype4" value="" style="width: 25%;"></span><span>Range<input type="text" name="attr_attackrange4" value="" style="width: 20%;"></span><span>Hit Bonus<input type="text" name="attr_hitbonus4" value="0" style="width: 10%"></span><br>
    <span>Damage<input type="text" name="attr_attackdamage4" value="" style="width: 15%"></span><span>D.Type<input type="text" name="attr_damagetype4" value="" style="width: 15%"></span><span>Tags<input type="text" name="attr_attacktags4" value="" style="width: 35%;"></span><br>
    Description or Effects? <input type="checkbox" class="sheet-toggle-show4"><br>
    <div class="sheet-body4">
    <textarea class=textAtks name="attr_attackeffects4" value="" style="width: 90%; height: 75px; resize: none;"></textarea></div>
    </div>
    </div>    
    <input type="checkbox" class="sheet-toggle-show5">
    <button type="roll" name="roll_attack5" style="margin-left: -1px;" value="&{template:default} {{title=@{slots5}}} {{Type=@{attacktype5}}} {{Range=@{attackrange5}}} {{Tags=@{attacktags5}}} {{To Hit= [[1d20+@{hitbonus5}+@{grit} +?{Accuracy/Difficulty|0}d6k1]]}} {{Damage=[[@{attackdamage5}]] @{damagetype5}}} {{Effect=@{attackeffects5}}}"></button>
    <input type="text" name="attr_slots5" value="" style="width: 28%; margin-left: -2px;">
    <div class="sheet-body5">
    <span>Type<input type="text" name="attr_attacktype5" value="" style="width: 25%;"></span><span>Range<input type="text" name="attr_attackrange5" value="" style="width: 20%;"></span><span>Hit Bonus<input type="text" name="attr_hitbonus5" value="0" style="width: 10%"></span><br>
    <span>Damage<input type="text" name="attr_attackdamage5" value="" style="width: 15%"></span><span>D.Type<input type="text" name="attr_damagetype5" value="" style="width: 15%"></span><span>Tags<input type="text" name="attr_attacktags5" value="" style="width: 35%;"></span><br>
    Description or Effects? <input type="checkbox" class="sheet-toggle-show5"><br>
    <div class="sheet-body5">
    <textarea class=textAtks name="attr_attackeffects5" value="" style="width: 90%; height: 75px; resize: none;"></textarea></div>
    </div>
    </div>
    <select name="linked" type="text" list="linked" class=linkedBox style="width: 13%; text-align:left; margin-right: 4px;">
        <option value="Unlinked"></option>
        <option value="Linked">🔗</option>
        </select>
    <button type="roll" name="roll_attack2" style="margin-left: -1px;" value="&{template:default} {{title=@{slots2}}} {{Type=@{attacktype2}}} {{Range=@{attackrange2}}} {{Tags=@{attacktags2}}} {{To Hit= [[1d20+@{hitbonus2}+@{grit} +?{Accuracy/Difficulty|0}d6k1]]}} {{Damage=[[@{attackdamage2}]] @{damagetype2}}} {{Effect=@{attackeffects2}}}"></button>
    <input type="text" name="attr_slots2" value="" style="width: 29%; margin-left: -2px;">
    <input type="checkbox" class="sheet-toggle-show2" style="margin-left: -4px;">
    <div class="sheet-body2">
    <span>Type<input type="text" name="attr_attacktype2" value="" style="width: 25%;"></span><span>Range<input type="text" name="attr_attackrange2" value="" style="width: 20%;"></span><span>Hit Bonus<input type="text" name="attr_hitbonus2" value="0" style="width: 10%"></span><br>
    <span>Damage<input type="text" name="attr_attackdamage2" value="" style="width: 15%"></span><span>D.Type<input type="text" name="attr_damagetype2" value="" style="width: 15%"></span><span>Tags<input type="text" name="attr_attacktags2" value="" style="width: 35%;"></span><br>
    Description or Effects? <input type="checkbox" class="sheet-toggle-show2"><br>
    <div class="sheet-body2">
    <textarea class=textAtks name="attr_attackeffects2" value="" style="width: 90%; height: 75px; resize: none;"></textarea></div>
    </div>
    </div>    <input type="checkbox" class="sheet-toggle-show1">
    <button type="roll" name="roll_attack1" style="margin-left: -1px;" value="&{template:default} {{title=@{slots1}}} {{Type=@{attacktype1}}} {{Range=@{attackrange1}}} {{Tags=@{attacktags1}}} {{To Hit= [[1d20+@{hitbonus1}+@{grit} +?{Accuracy/Difficulty|0}d6k1]]}} {{Damage=[[@{attackdamage1}]] @{damagetype1}}} {{Effect=@{attackeffects1}}}"></button>
    <input type="text" name="attr_slots1" value="" style="width: 28%; margin-left: -2px;">
    <div class="sheet-body1">
    <span>Type<input type="text" name="attr_attacktype1" value="" style="width: 25%;"></span><span>Range<input type="text" name="attr_attackrange1" value="" style="width: 20%;"></span><span>Hit Bonus<input type="text" name="attr_hitbonus1" value="0" style="width: 10%"></span><br>
    <span>Damage<input type="text" name="attr_attackdamage1" value="" style="width: 15%"></span><span>D.Type<input type="text" name="attr_damagetype1" value="" style="width: 15%"></span><span>Tags<input type="text" name="attr_attacktags1" value="" style="width: 35%;"></span><br>
    Description or Effects? <input type="checkbox" class="sheet-toggle-show1"><br>
    <div class="sheet-body1">
    <textarea class=textAtks name="attr_attackeffects1" value="" style="width: 90%; height: 75px; resize: none;"></textarea></div>
    </div>
    </div>
    <select name="linked" type="text" list="linked" class=linkedBox style="width: 13%; text-align:left; margin-right: 4px;">
        <option value="Unlinked"></option>
        <option value="Linked">🔗</option>
        </select>
    <button type="roll" name="roll_attack2" style="margin-left: -1px;" value="&{template:default} {{title=@{slots2}}} {{Type=@{attacktype2}}} {{Range=@{attackrange2}}} {{Tags=@{attacktags2}}} {{To Hit= [[1d20+@{hitbonus2}+@{grit} +?{Accuracy/Difficulty|0}d6k1]]}} {{Damage=[[@{attackdamage2}]] @{damagetype2}}} {{Effect=@{attackeffects2}}}"></button>
    <input type="text" name="attr_slots2" value="" style="width: 29%; margin-left: -2px;">
    <input type="checkbox" class="sheet-toggle-show2" style="margin-left: -4px;">
    <div class="sheet-body2">
    <span>Type<input type="text" name="attr_attacktype2" value="" style="width: 25%;"></span><span>Range<input type="text" name="attr_attackrange2" value="" style="width: 20%;"></span><span>Hit Bonus<input type="text" name="attr_hitbonus2" value="0" style="width: 10%"></span><br>
    <span>Damage<input type="text" name="attr_attackdamage2" value="" style="width: 15%"></span><span>D.Type<input type="text" name="attr_damagetype2" value="" style="width: 15%"></span><span>Tags<input type="text" name="attr_attacktags2" value="" style="width: 35%;"></span><br>
    Description or Effects? <input type="checkbox" class="sheet-toggle-show2"><br>
    <div class="sheet-body2">
    <textarea class=textAtks name="attr_attackeffects2" value="" style="width: 90%; height: 75px; resize: none;"></textarea></div>
    </div>
    </div>
    <input type="checkbox" class="sheet-toggle-show1">
    <button type="roll" name="roll_attack1" style="margin-left: -1px;" value="&{template:default} {{title=@{slots1}}} {{Type=@{attacktype1}}} {{Range=@{attackrange1}}} {{Tags=@{attacktags1}}} {{To Hit= [[1d20+@{hitbonus1}+@{grit} +?{Accuracy/Difficulty|0}d6k1]]}} {{Damage=[[@{attackdamage1}]] @{damagetype1}}} {{Effect=@{attackeffects1}}}"></button>
    <input type="text" name="attr_slots1" value="" style="width: 28%; margin-left: -2px;">
    <div class="sheet-body1">
    <span>Type<input type="text" name="attr_attacktype1" value="" style="width: 25%;"></span><span>Range<input type="text" name="attr_attackrange1" value="" style="width: 20%;"></span><span>Hit Bonus<input type="text" name="attr_hitbonus1" value="0" style="width: 10%"></span><br>
    <span>Damage<input type="text" name="attr_attackdamage1" value="" style="width: 15%"></span><span>D.Type<input type="text" name="attr_damagetype1" value="" style="width: 15%"></span><span>Tags<input type="text" name="attr_attacktags1" value="" style="width: 35%;"></span><br>
    Description or Effects? <input type="checkbox" class="sheet-toggle-show1"><br>
    <div class="sheet-body1">
    <textarea class=textAtks name="attr_attackeffects1" value="" style="width: 90%; height: 75px; resize: none;"></textarea></div>
    </div>
    </div>
    <select name="linked" type="text" list="linked" class=linkedBox style="width: 13%; text-align:left; margin-right: 4px;">
        <option value="Unlinked"></option>
        <option value="Linked">🔗</option>
        </select>
    <button type="roll" name="roll_attack2" style="margin-left: -1px;" value="&{template:default} {{title=@{slots2}}} {{Type=@{attacktype2}}} {{Range=@{attackrange2}}} {{Tags=@{attacktags2}}} {{To Hit= [[1d20+@{hitbonus2}+@{grit} +?{Accuracy/Difficulty|0}d6k1]]}} {{Damage=[[@{attackdamage2}]] @{damagetype2}}} {{Effect=@{attackeffects2}}}"></button>
    <input type="text" name="attr_slots2" value="" style="width: 29%; margin-left: -2px;">
    <input type="checkbox" class="sheet-toggle-show2" style="margin-left: -4px;">
    <div class="sheet-body2">
    <span>Type<input type="text" name="attr_attacktype2" value="" style="width: 25%;"></span><span>Range<input type="text" name="attr_attackrange2" value="" style="width: 20%;"></span><span>Hit Bonus<input type="text" name="attr_hitbonus2" value="0" style="width: 10%"></span><br>
    <span>Damage<input type="text" name="attr_attackdamage2" value="" style="width: 15%"></span><span>D.Type<input type="text" name="attr_damagetype2" value="" style="width: 15%"></span><span>Tags<input type="text" name="attr_attacktags2" value="" style="width: 35%;"></span><br>
    Description or Effects? <input type="checkbox" class="sheet-toggle-show2"><br>
    <div class="sheet-body2">
    <textarea class=textAtks name="attr_attackeffects2" value="" style="width: 90%; height: 75px; resize: none;"></textarea></div>
    </div>
    </div>   
  </section>

<section class="power">
    <h3>Spells & Techniques</h3>
    <h3><div>Used memory</div>
        <input name="attr_memory" type="number" value="0" min="0" max="99" style="width: auto;"><span>/</span><input name="attr_memory_max" type="number" value="0" min="0" max="99" style="width: auto;" ></td></h3>
        <div class="container hidden">
        <span><input name="attr_powerslots1" type="text" list="power_slots" style="width: auto;"></select></span>
        <span><input name="attr_powerslots2" type="text" list="power_slots" style="width: auto;"></select></span>
        <span><input name="attr_powerslots3" type="text" list="power_slots" style="width: auto;"></select></span></div>
        <fieldset class="repeating_powers">
        <input type="checkbox" class="sheet-toggle-show" >
        <button type="roll" name="roll_power" value="&{template:default} {{title=@{powername}}}   {{Type=@{powertype}}} {{Action=@{poweraction}}} {{Range=@{powerrange}}} {{Tags=@{powertags}}} {{Effect=@{powereffects}}}" > </button>
        <input type="text" class=resizedTextbox name="attr_powername" value=""><br>
        <div class="sheet-body">
        <span>Type<input type="text" class=text40 name="attr_powertype" value=" "style="width:28%"></span><span>Action<input type="text" class=text80 Textbox name="attr_poweraction" value=" " style="width:28%"></span><br><span>Range<input type="text" class=text105 name="attr_powerrange" value=" " style="width:95%"></span><br>
        <span>Tags<input type="text" name="attr_powertags" value=" " style="width:95%"></span><br>
        <span>Description<textarea name="attr_powereffects" style="width:95%"></textarea></span>
        </div>
    </fieldset>
  </section>

<section class="inv">
    <h3>Support Items</h3>
    <div class="container hidden">
        <span><input name="attr_inv_slots1" type="text" list="inv_slots" style="width: auto;"> <span><input name="attr_inv_slots2" type="text" list="inv_slots" style="width: auto;"></span><br>
        <span><input name="attr_inv_slots3" type="text" list="inv_slots" style="width: auto;"> <span><input name="attr_inv_slots4" type="text" list="inv_slots" style="width: auto;"></span><br>
      </div>
    <fieldset class="repeating_support">
        <input type="checkbox" class="sheet-toggle-show" >
        <button type="roll" name="roll_support" value="&{template:default} {{title=@{supportname}}} {{Type=@{supporttype}}} {{Tags=@{supporttags}}} {{Effects=@{supporteffects}}}"> </button>
        <input type="text" name="attr_supportname" value=" ">
        <div class="sheet-body">
        <span>Type<input type="text" name="attr_supporttype" style="width: 20%" value=" "></span>
        <span>Tags<input type="text" name="attr_supporttags" style="width: 60%" value=" "></span>
        <textarea name="attr_supporteffects" style="resize: none; width: 95%; height: 60px; margin-bottom: -5px;"></textarea>
        </div>
    </fieldset>
  </section>

 <section class="talent">
    <h3>Talents</h3>
   <fieldset class="repeating_talent">
    <span><input name="attr_talentslots1" type="text" list="talent_slots" style="width: auto;"></select></span>
        <input type="checkbox" class="sheet-toggle-show" >
        <button type="roll" name="roll_talent" value="&{template:default} {{title=@{talent_name}}} {{Description=@{talent_info}}}"> </button>
        <input type="text" class="resizedTextbox" name="attr_talent_name" value=" ">
        <div class="sheet-body">
        <textarea name="attr_talent_info"></textarea>
        </div>
</section>

<section class="misc">
    <h3>Ancestry</h3>
    <input type="checkbox" class="sheet-toggle-show">
    <button type="roll" name="roll_anc" value="&{template:default} {{title=@{anc_trait_name}}} {{Description=@{anc_trait_info}}}"></button>
    <Label>Trait<input type=text class=text160 name="attr_anc_trait_name"></label>
    <div class="sheet-body">
        <textarea name="attr_anctrait_info" style="resize: none; width: 95%; height: 40px; margin-bottom: -25px;"></textarea>
    </div>
    <br>
    <h3>Job</h3>
    <input type="checkbox" class="sheet-toggle-show1">
    <button type="roll" name="roll_job1" value="&{template:default} {{title=@{job_trait1}}} {{Description=@{job_trait1_info}}}" ></button>
    <Label>Trait<input type=text class=text160 name="attr_job_trait1" readonly></label>
    <div class="sheet-body1">
        <textarea name="attr_job_trait1_info" style="resize: none; width: 95%; height: 70px; margin-bottom: -25px;"></textarea>
    </div>
    <br>
    <input type="checkbox" class="sheet-toggle-show2">
    <button type="roll" name="roll_job2" value="&{template:default} {{title=@{job_trait2}}} {{Description=@{job_trait2_info}}}" ></button>
    <Label>Trait<input type=text class=text160 name="attr_job_trait2" readonly></label>
    <div class="sheet-body2">
        <textarea name="attr_job_trait2_info" style="resize: none; width: 95%; height: 70px; margin-bottom: -25px;"></textarea>
    </div>
    <br>
    <input type="checkbox" class="sheet-toggle-show3">
    <button type="roll" name="roll_job3" value="&{template:default} {{title=@{job_trait3}}} {{Description=@{job_trait3_info}}}" ></button>
    <Label>Trait<input type=text class=text160 name="attr_job_trait3" readonly></label>
    <div class="sheet-body3">
        <textarea name="attr_job_trait3_info" style="resize: none; width: 95%; height: 70px; margin-bottom: -25px;"></textarea>
    </div>
    <br>
</section>
</main>

<!-- NPC Sheet -->


<main class="sheet-npc">

    <section class="header f-center">
        <img src="https://cdn.discordapp.com/attachments/1007928324217114695/1073056431802159114/BEACON_Cover5.jpg" style="width: auto; height: auto;" alt="Beacon RPG Logo">
      </section>

<section class="npc-base">
    <div>Name <input name="attr_character_name" type="text" class=resizedTextbox></div>
    <div><span>Tier </span><input name="attr_tier" type="number" value="1" min="1" max="99" ><span>Size</span><input name="attr_size" type="number" value="1" min="1" max="5"></div>
    <div>Initiative<input name="attr_initiative" type="number" value="1" min="1" max="7"></div>
    <div class="f-row nowrap">
      <div>Bulk</div>
      <input type="number" name="attr_npc_bulk" value="0">
      <button type="roll" name="roll_bulk" value="&{template:default} {{title=bulk}}   {{roll= [[1d20+@{bulk} +?{Accuracy/Difficulty|0}d6k1]]}}"> </button>
    </div>
    <div class="f-row nowrap">
      <div>Agility</div>
      <input type="number" name="attr_npc_agility" value="0">
      <button type="roll" name="roll_agility" value="&{template:default} {{title=agility}}   {{roll= [[d20+@{agility}[agility] +?{Accuracy/Difficulty|0}d6k1 ]]}}"> </button>
    </div>
    <div class="f-row nowrap">
      <div>Mind</div>
      <input type="number" name="attr_npc_mind" value="0">
      <button type="roll" name="roll_mind" value="&{template:default} {{title=mind}}   {{roll= [[d20+@{mind}[mind] +?{Accuracy/Difficulty|0}d6k1 ]]}}"> </button>
    </div>
    <div class="f-row nowrap">
      <div>Magic</div>
      <input type="number" name="attr_npc_magic" value="0">
      <button type="roll" name="roll_magic" value="&{template:default} {{title=magic}}   {{roll= [[d20+@{magic}[magic] +?{Accuracy/Difficulty|0}d6k1 ]]}}"> </button>
    </div>
  </section>

  <section class="npc-stats common">
      <div>Dodge</div><input name="attr_npc_dodge" type="number">
      <div>A-Defense</div><input name="attr_npc_a_def" type="number"><br/>
      <div>Save Target</div><input name="attr_npc_save" type="number">
      <div>Scope</div><input name="attr_npc_scope" type="number"><br/>
      <div>Speed</div><input name="attr_npc_speed" type="number">
  </section>

  <section class="npc-bar">
      <div>Armor</div> <input type="number" name="attr_npc_armor" value="0">
      <div>Temp HP</div> <input type="number" name="attr_npc_temphp" value="0"><br/>
      <div>HP</div> <input type="number" name="attr_npc_hp" value="0"> <span>/</span> <input type="number" name="attr_npc_hp_max" value="0"><br/>
      <div>Stress</div> <input type="number" name="attr_npc_stress" value="0"> / <input type="number" name="attr_npc_stress_max" value="0"><br/>
      <div>Mana</div> <input type="number" name="attr_npc_mana" value="0"> / <input type="number" name="attr_npc_mana_max" value="0"><br/>
  </section>


  <section class="npc-atk">
    <h3>Attacks</h3>
    <fieldset class="repeating_attacks">
        <input type="checkbox" class="sheet-toggle-show" >
        <button type="roll" name="roll_attack" value="&{template:default} {{title=@{attackname}}}   {{Type=@{attacktype}}} {{Range=@{attackrange}}} {{Tags=@{attacktags}}} {{To Hit= [[1d20+@{npctohit} +?{Accuracy/Difficulty|0}d6k1]]}} {{Damage=[[@{attackdamage}]] @{damagetype}}} {{Effect=@{attackeffects}}}" > </button>
        <input type="text" class=text160 name="attr_attackname" value=" "><span>Range<input type="text" class=text105 name="attr_attackrange" value=" "></span><br>
        <div class="sheet-body">
        <span>Type<input type="text" name="attr_attacktype" value=" "></span><br>
        <span>To Hit<input type="text" name="attr_npctohit" class=smallerTextbox value=" "></span><span>Damage<input type="text" class=smallerTextbox name="attr_attackdamage" value=" "></span><span>Type<input type="text" name="attr_damagetype" class=resizedTextbox value=" "></span><br>
        <span>Tags<input type="text" name="attr_attacktags" value=" "></span>Effects? <input type="checkbox" class="sheet-toggle-show"><br>
        <div class="sheet-body">
        <textarea class=textAtks name="attr_attackeffects" value=" "></textarea></div>
        </div>
        </div>
    </fieldset>
  </section>
  
  <section class="npc-actions">
    <h3>Skills & Spells</h3>
    <fieldset class="repeating_powers">
        <input type="checkbox" class="sheet-toggle-show" >
        <button type="roll" name="roll_power" value="&{template:default} {{title=@{powername}}}   {{Type=@{powertype}}} {{Action=@{poweraction}}} {{Range=@{powerrange}}} {{Tags=@{powertags}}} {{Effect=@{powereffects}}}" > </button>
        <input type="text" class=resizedTextbox name="attr_powername" value=" ">
        <div class="sheet-body">
        <label>Type<input type="text" name="attr_powertype" value=" "></label>
        <label>Action<input type="text" name="attr_poweraction" value=" "></label>
        <label>Range<input type="text" name="attr_powerrange" value=" "></label>
        <label>Tags<input type="text" name="attr_powertags" value=" "></label>
        <textarea name="attr_powereffects"></textarea>
        </div>
    </fieldset>
  </section>
  
  <section class="npc-trts">
    <h3>Traits</h3>
    <fieldset class="repeating_trait">
    <input type="checkbox" class="sheet-toggle-show" >
    <button type="roll" name="roll_trait" value="&{template:default} {{title=@{traitname}}}   {{Effect=@{traiteffect}}}" ></button>
    <input name="attr_traitname", type="text" class=resizedTextbox> 
    <div class="sheet-body">
    <textarea name="attr_traiteffect"></textarea> </div>
    </fieldset>
  </section>
  
  <section class="npc-inventory">
    <h3>Support Items</h3>
    <fieldset class="repeating_support">
        <input type="checkbox" class="sheet-toggle-show" >
        <button type="roll" name="roll_support" value="&{template:default} {{title=@{supportname}}}   {{Type=@{supporttype}}} {{Tags=@{supporttags}}} {{Effect=@{supporteffects}}}"> </button>
        <input type="text" name="attr_supportname" value=" ">
        <div class="sheet-body">
        <label>Type<input type="text" name="attr_supporttype" value=" "></label>
        <label>Tags<input type="text" name="attr_supporttags" value=" "></label>
        <label>Effect</label>
        <textarea name="attr_supporteffects"></textarea>
        </div>
  </section>

  
</main>

<!-- General Rules Tab -->

<main class="sheet-gen">

    <section class="header f-center">
        <img src="https://cdn.discordapp.com/attachments/1007928324217114695/1073056431802159114/BEACON_Cover5.jpg" style="width: 100%; height: auto;" alt="Beacon RPG Logo">
    </section>

            <section class="rerolltable">
                <h3>Reroll Table</h3>
                <button type="action" name="act_reset">Reset Round</button>
                <p>When you make an attack roll, ability check, or saving throw, you can use the reroll table to try again. Each option can only be chosen 1/round. You can use the reroll table after finding out if the roll would succeed, but before it actually occurs. All ACC or DIF are also rerolled.</p>
                <p><button type="roll" name="roll_rerollstress" value="&{template:default} {{title=Reroll Table}}   {{=[[1d3]] Stress}}"></button><input type="checkbox" name="attr_reroll1"> A: Take 1d3 Stress</p>
                <p><button type="roll" name="roll_rerollmark" value="&{template:default} {{title=Reroll Table}}   {{=Become MARKED. This doesn't count as a condition you've given yourself.}}"></button><input type="checkbox" name="attr_reroll2"> B: Become MARKED. You can't use this option if you are MARKED. This doesn't count as a condition you've given yourself.</p>
                <p><button type="roll" name="roll_rerollopp" value="&{template:default} {{title=Reroll Table}}   {{=If you are adjacent to an enemy or within Reach of an enemy's weapon, they can choose to A) Opportunity Attack you or B) deal [[3]] Physical to you as a reaction.}}"></button><input type="checkbox" name="attr_reroll3"> C: If you are adjacent to an enemy or within one of their weapon's REACH, they can choose to a) Opportunity Attack you or b) deal 3 Physical to you as a Reaction.</p>
              </section>

<section class="surge">
    <h3><button type="roll" name="roll_surge" value="&{template:default} {{title=Surge}}   {{=?{Surge Level|1,[[2]] Stress|2,[[1d3+1]] Stress|3,[[1d6+2]] Stress|4+,[[1d6+4]] Stress}}}"></button>Surge</h3>
    <p>You can surge 1/round to take a 2nd turn. A surge counts as a turn for all effects that start or end at the character's next turn.
    You gain your standard movement, standard action, and minor action as normal.</p>
    <table>
        <tr>
            <th>Surge #</th>
            <th>Stress Cost</th>
        </tr>
        <tr>
            <td>1   <input type="checkbox"></td>
            <td>2</td>
        </tr>
        <tr>
            <td>2   <input type="checkbox"></td>
            <td>1d3+1</td>
        </tr>
        <tr>
            <td>3   <input type="checkbox"></td>
            <td>1d6+2</td>
        </tr>
        <tr>
            <td>4+  <input type="checkbox"></td>
            <td>1d6+4</td>
        </tr>
    </table>
</section>

<section class="reactions">
    <h3>Reactions</h3>
    <div>Focus<input type="number" name="attr_focus" value="0"></div>
    <label><button type="roll" name="roll_counter" value="&{template:default} {{title=Counterattack}}   {{Action=Reaction, 1/round}} {{Tags=Focus 1}} {{Trigger=You are hit by an attack from a character within reach of one of your weapons or spells.}} {{Effect=You can VOLLEY or FIGHT with one of those weapons or spells against that character.}}"></button><input type="checkbox" name="attr_counter1"> Counterattack
    </label>
    <p><b>Focus 1, 1/Round</b></p>
    <p>Trigger: You are hit by an attack from a character within one of your weapon or spell’s Reach.</p>
    <label><button type="roll" name="roll_interpose" value="&{template:default} {{title=Interpose}}   {{Action=Reaction}} {{Tags = Focus 1}} {{Trigger=An ally within Range 3 is targeted by an attack.}} {{Effect=You can move up to 2 spaces, ignoring reactions. If you end this movement next to the targeted ally, you can choose to become the target instead. An attack roll can only be interposed once.}}"></button> Interpose
    </label>
    <p><b>Focus 1</b></p>
    <p>Trigger: An ally within Range 3 is targeted by an attack.</p>
    <label><button type="roll" name="roll_oppatk" value="&{template:default} {{title=Opportunity Attack}}   {{Action=Reaction, 1/round}} {{Trigger=A hostile character begins a movement or standard movement within reach of one of your weapons or techniques.}} {{Effect=You can VOLLEY or FIGHT against them with one of those weapons or techniques.}}"></button><input type="checkbox" name="attr_opp1"> Opportunity Attack
    </label>
    <p><b>1/Round</b></p>
    <p>Trigger: A hostile character begins a movement or standard movement within one of your weapon or technique's Reach.</p>
</section>

<section class="gen_misc">
    <h3>Other Actions</h3>
    <label><button type="roll" name="roll_defend" value="&{template:default} {{title=Defend}}   {{Action=(1) BOLSTER}} {{=Gain [[1d3+@{armor}]] Focus. Until the start of your next turn, attacks against you gain +1 DIF.}}"></button>(1) Defend</label>
    <label><button type="roll" name="roll_recover" value="&{template:default} {{title=Recover}}   {{Action=(1) BOLSTER}} {{=Choose one: 
    • Spend a Recovery to regain all your HP
    • Clear all your Stress
    • Regain all your Mana
    
    Then choose one: 
    • Reload all reloading weapons/abilities
    • Clear all Discord on yourself
    • Clear a condition or effect on you that wasn't caused by yourself
    • Clear a condition or effect on an adjacent ally that wasn't caused by them}}"></button>(1) Recover</label>
    <label><button type="roll" name="roll_mark" value="&{template:default} {{title=Mark}}   {{Action=(3) SKIRMISH}} {{Scope=@{scope}}} {{=A character within your Scope and Line of Sight gains the MARKED condition.}}"></button>(3) Mark</label>
    <label><button type="roll" name="roll_hide" value="&{template:default} {{title=Hide}}   {{Action=(4) REPOSITION}} {{=You gain the HIDDEN condition. To hide, you can't be ENGAGED and either must be A) outside of enemy Line of Sight, B) benefiting from cover against enemies that have Line of Sight to you, or C) INVISIBLE.}}"></button>(4) Hide</label>
    <label><button type="roll" name="roll_rush" value="&{template:default} {{title=Rush}}   {{Action=(4) REPOSITION}} {{=You can either (A) Move up to your Speed, or (B) until the end of the turn, ignore ENGAGEMENT and don’t provoke reactions from movement.}}"></button>(4) Rush</label>
    <label><button type="roll" name="roll_improvised" value="&{template:default} {{title=Improvised Attack}}   {{Action=(5) FIGHT}} {{Range=Adjacent}} {{To Hit= [[1d20+@{grit} +?{Accuracy/Difficulty|0}d6k1]]}} {{Damage=[[1d3]] Physical}}"></button>(5) Improvised Attack</label>
    <label><button type="roll" name="roll_grapple" value="&{template:default} {{title=Grapple}}   {{Action=(5) FIGHT}} {{Range=Adjacent}} {{To Hit= [[1d20+@{grit} +?{Accuracy/Difficulty|0}d6k1]]}} {{Effect=On a hit, both characters are GRAPPLED.}}"></button>(5) Grapple</label>
    <label><button type="roll" name="roll_grapple_ref" value="&{template:default} {{title=GRAPPLED Reference}} {{=While grappled, both characters count as ENGAGED and can't take Reactions. The larger character can move normally. The smaller character is IMMOBILIZED, but is drug along by the larger character. If you are the same size as the target, you count as the larger one during the turn you grapple them. Characters that are the same size can make a contested Bulk check during their turn to see if they count as the larger one that turn.
    
    GRAPPLED ends if the characters are no longer adjacent to each other, the initiator ends it as a free action, or the grapple target succeeds on an opposed Bulk check as a Minor Action.}}"></button>GRAPPLED Ref</label>
    <label><button type="roll" name="roll_shove" value="&{template:default} {{title=Shove}}   {{Action=(5) FIGHT}} {{Range=Adjacent}} {{To Hit= [[1d20+@{grit} +?{Accuracy/Difficulty|0}d6k1]]}} {{Effect=On a hit, you can either Push them 1 space, or knock them PRONE}}"></button>(5) Shove</label>
</section>

<section class="wounds">
    <h3><button type="roll" name=roll_wound value="&{template:default} {{title=Wound/Overstress Roll}}   {{=[[1d6]]}}"></button>Wounds and Overstress</h3>
    <br>
    <table>
        <tr>
            <th>  3 Wound   </th>
            <th>  2 Wounds  </th>
            <th>  1 Wounds  </th>
            <th>  0 Wounds  </th>
            <th>Outcome</th>
        </tr>
        <tr>
            <td>5-6</td>
            <td>6</td>
            <td>-</td>
            <td>-</td>
            <td><span class="sheet-tooltip"><strong>Dazed</strong>
                <span class="sheet-tooltip-text">
                 You are DAZED until the end of your next turn.</td></span>
                </span> 
        </tr>
        <tr>
            <td>3-4</td>
            <td>4-5</td>
            <td>5-6</td>
            <td>-</td>
            <td><span class="sheet-tooltip"><strong>Broken Weapon</strong>  
                <span class="sheet-tooltip-text">
                 <p>Destroy one of your weapons. 
                    <li>Limited or Consumable equipment can’t be selected if they don’t have any charges left.</li>
                    <li>If you can’t destroy a weapon, this becomes the BROKEN SUPPORT result.</li>
                    <li>If you can’t destroy either, this becomes the STUNNED result.</li></p></td>
                </span>
              </span>
        </tr>
        <tr>
            <td>1-2</td>
            <td>2-3</td>
            <td>3-4</td>
            <td>-</td>
            <td><span class="sheet-tooltip"><strong>Broken Support</strong>  
                <span class="sheet-tooltip-text">
                 <p>Destroy one of your support items.
                    <li>Limited or Consumable equipment can’t be selected if they don’t have any charges left.</li>
                    <li>If you can’t destroy a support item, this becomes the BROKEN WEAPON result.</li>
                    <li>If you can’t destroy either, this becomes the STUNNED result.</li></p></td>
                </span>
              </span>
        </tr>
        <tr>
            <td>-</td>
            <td>1</td>
            <td>1-2</td>
            <td>-</td>
            <td><span class="sheet-tooltip"><strong>Staggered</strong>  
                <span class="sheet-tooltip-text">
                 <p>You are SLOWED and STUNNED until the end of your next turn.</p></td>
                </span>
              </span>
        </tr>
        <tr>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>1-6</td>
            <td><span class="sheet-tooltip"><strong>Defeated</strong>  
                <span class="sheet-tooltip-text">
              <img src="https://media.giphy.com/media/TbONGqAdpTWQW3Hz5V/giphy.gif" alt="You Died"></td>
                </span>
              </span>
        </tr>
    </table>
    <br>
    <table>
        <tr>
            <th>  3 Over Stress  </th>
            <th>  2 Over Stress  </th>
            <th>  1 Over Stress  </th>
            <th>  0 Over <br> Stress  </th>
            <th>Outcome</th>
        </tr>
        <tr>
            <td>5-6</td>
            <td>6</td>
            <td>-</td>
            <td>-</td>
            <td><span class="sheet-tooltip"><strong>Dazed</strong>  
                <span class="sheet-tooltip-text">
                 <p>You are DAZED until the end of your next turn.</p></td>
                </span>
              </span>
        </tr>
        <tr>
            <td>3-4</td>
            <td>4-5</td>
            <td>5-6</td>
            <td>-</td>
            <td><span class="sheet-tooltip"><strong>Broken Tech</strong>  
                <span class="sheet-tooltip-text">
                    <p>Destroy one of your techniques.
                        <li>Limited or Consumable techniques can’t be selected if they don’t have any charges left.</li>
                        <li>If you can’t destroy technique, this becomes the LOST MANA result.</li>
                        <li>If you can’t destroy either, this becomes the EXPOSED result.</li></p></td>
                </span>
              </span>
        </tr>
        <tr>
            <td>1-2</td>
            <td>2-3</td>
            <td>3-4</td>
            <td>-</td>
            <td><span class="sheet-tooltip"><strong>Lost Mana</strong>  
                <span class="sheet-tooltip-text">
                    <p>Your current and maximum mana is reduced by 1 until fixed during a REST.
                        <li> If your mana maximum is 0, choose the BROKEN TECH option.</li>
                        <li>If you can’t do either, this becomes the EXPOSED result.</li></p></td>
                </span>
              </span>
        </tr>
        <tr>
            <td>-</td>
            <td>1</td>
            <td>1-2</td>
            <td>-</td>
            <td><span class="sheet-tooltip"><strong>Exposed</strong>  
                <span class="sheet-tooltip-text">
                    <p>You are VULNERABLE and WEAKENED until the end of your next turn.</p></td>
                </span>
              </span>
        </tr>
        <tr>
            <td>-</td>
            <td>-</td>
            <td>-</td>
            <td>1-6</td>
            <td><span class="sheet-tooltip"><strong>Defeated</strong>  
                <span class="sheet-tooltip-text">
              <img src="https://media.giphy.com/media/TbONGqAdpTWQW3Hz5V/giphy.gif" alt="You Died"></td>
                </span>
              </span>
        </tr>
    </table>

</section>

<section class=phase>
    <h3>Rule References</h3>
    <table>
        <tr>
            <th><input type="checkbox" id="mycheckbox">
                <label for="mycheckbox">Work In Progress</label>
                <div id="banner"></div>
                <div id="modal">
                    <label for="mycheckbox">&#10005;</label>
                    <h2>Place Holder One</h2>
                    <p>Description One</p>
                </div></th>
        </tr>
        <tr>
            <th><input type="checkbox" id="mycheckbox2">
                <label for="mycheckbox2">Work In Progress</label>
                <div id="banner"></div>
                <div id="modal">
                    <label for="mycheckbox2">&#10005;</label>
                    <h2>Place Holder Two</h2>
                    <p>Description Two</p>
                </div></th>
        </tr>
        <tr>
            <th><input type="checkbox" id="mycheckbox3">
                <label for="mycheckbox3">Work In Progress</label>
                <div id="banner"></div>
                <div id="modal">
                    <label for="mycheckbox3">&#10005;</label>
                    <h2>Place Holder Three</h2>
                    <p>Description Three</p>
                </div></th>
        </tr>
        <tr>
            <th><input type="checkbox" id="mycheckbox4">
                <label for="mycheckbox4">Work In Progress</label>
                <div id="banner"></div>
                <div id="modal">
                    <label for="mycheckbox4">&#10005;</label>
                    <h2>Place Holder Three</h2>
                    <p>Description Three</p>
                </div></th>
        </tr>
    </table>
</section>

</main>
</body>

<!-- Script Block -->

<script type="text/worker">

	var starting_weapons_data = [];
	var tags_data = [];
    var class_data = [];
	var array_of_weapon_names = [];
	
	on("sheet:opened", function(){
		console.log("Loaded JSON");
		
		starting_weapons_data = JSON.parse('[{"id":"missing_weapon","name":"ERR: DATA NOT FOUND","size":"Main","type":"Blade","damage":[],"range":[],"tags":[],"class_level":0,"description":"This is likely the result of a missing or outdated content pack."},{"id":"w_aetherbreaker","name":"Aetherbreaker","size":"Main","type":"Club","damage":[{"type":"Force","val":"2d6+1"}],"range":[{"type":"Reach","val":1}],"tags":[{"id":"tg_inaccurate"}],"source":"starting","class_level":0},{"id":"w_bloodpike","name":"Bloodpike","size":"Heavy","type":"Longarm","damage":[{"type":"Force","val":"2d6+1"}],"range":[{"type":"Reach","val":2}],"tags":[],"source":"starting","class_level":0},{"id":"w_hammer","name":"Hammer","size":"Light","type":"Club","damage":[{"type":"Physical","val":"1d3+1"}],"range":[{"type":"Reach","val":1}],"tags":[{"id":"tg_thrown","val":5}],"source":"starting","class_level":0},{"id":"w_maul","name":"Maul","size":"Heavy","type":"Club","damage":[{"type":"Physical","val":"3d6"}],"range":[{"type":"Reach","val":1}],"tags":[{"id":"tg_push","val":1},{"id":"tg_inaccurate"}],"source":"starting","class_level":0},{"id":"w_moonknife","name":"Moonknife","size":"Light","type":"Blade","damage":[{"type":"Lunar","val":"1d3"}],"range":[{"type":"Reach","val":1}],"tags":[{"id":"tg_thrown","val":3},{"id":"tg_accurate"}],"source":"starting","class_level":0},{"id":"w_photon_axe","name":"Photon Axe","size":"Heavy","type":"Blade","damage":[{"type":"Astral","val":"1d6+7"}],"range":[{"type":"Reach","val":1}],"tags":[{"id":"tg_reliable","val":4}],"source":"starting","class_level":0},{"id":"w_rapier","name":"Rapier","size":"Light","type":"Blade","damage":[{"type":"Physical","val":"2"}],"range":[{"type":"Reach","val":1}],"tags":[{"id":"tg_piercing"}],"source":"starting","class_level":0},{"id":"w_rapier","name":"Rapier","size":"Light","type":"Blade","damage":[{"type":"Physical","val":"2"}],"range":[{"type":"Reach","val":1}],"tags":[{"id":"tg_piercing"}],"source":"starting","class_level":0},{"id":"w_runespear","name":"Runespear","size":"Main","type":"Longarm","damage":[{"type":"Force","val":"1d6+1"}],"range":[{"type":"Reach","val":2}],"tags":[{"id":"tg_thrown","val":3}],"source":"starting","class_level":0},{"id":"w_sword","name":"Sword","size":"Main","type":"Blade","damage":[{"type":"Physical","val":"1d6+1"}],"range":[{"type":"Reach","val":1}],"tags":[{"id":"tg_reliable","val":2}],"source":"starting","class_level":0},{"id":"w_whip","name":"Whip","size":"Light","type":"Longarm","damage":[{"type":"Physical","val":"1d3"}],"range":[{"type":"Reach","val":3}],"tags":[],"source":"starting","class_level":0},{"id":"w_crossbow","name":"Crossbow","size":"Heavy","type":"Bow","damage":[{"type":"Physical","val":"2d6+3"}],"range":[{"type":"Range","val":10}],"tags":[{"id":"tg_piercing"},{"id":"tg_reloading"}],"source":"starting","class_level":0},{"id":"w_crystal_staff","name":"Crystal Staff","size":"Heavy","type":"Artifact","damage":[{"type":"Lunar","val":"2d6"}],"range":[{"type":"Range","val":10},{"type":"Blast","val":2}],"tags":[{"id":"tg_aetheric"},{"id":"tg_mana","val":2}],"source":"starting","class_level":0},{"id":"w_forbidden_tome","name":"Forbidden Tome","size":"Main","type":"Artifact","damage":[{"type":"Lunar","val":"1d3+1"}],"range":[{"type":"Range","val":15},{"type":"Blast","val":1}],"tags":[{"id":"tg_aetheric"},{"id":"tg_mana","val":1},{"id":"tg_arcing"}],"source":"starting","class_level":0},{"id":"w_lunar_cannon","name":"Lunar Cannon","size":"Heavy","type":"Magitech","damage":[{"type":"Lunar","val":"3d6+3"}],"range":[{"type":"Line","val":15}],"tags":[{"id":"tg_reliable","val":4},{"id":"tg_reloading"},{"id":"tg_slow"}],"source":"starting","class_level":0},{"id":"w_shardgun_pistol","name":"Shardgun Pistol","size":"Light","type":"Magitech","damage":[{"type":"Force","val":"1d3"}],"range":[{"type":"Range","val":5},{"type":"Reach","val":3}],"tags":[{"id":"tg_reliable","val":1}],"source":"starting","class_level":0},{"id":"w_shardgun_rifle","name":"Shardgun Rifle","size":"Main","type":"Magitech","damage":[{"type":"Force","val":"1d6+1"}],"range":[{"type":"Range","val":10}],"tags":[{"id":"tg_reliable","val":2}],"source":"starting","class_level":0},{"id":"w_shardshredder","name":"Shardshredder","size":"Main","type":"Magitech","damage":[{"type":"Force","val":"2d3"}],"range":[{"type":"Range","val":5},{"type":"Reach","val":3}],"tags":[],"source":"starting","class_level":0},{"id":"w_shortbow","name":"Shortbow","size":"Main","type":"Bow","damage":[{"type":"Physical","val":"1d6"}],"range":[{"type":"Range","val":10}],"tags":[{"id":"tg_arcing"}],"source":"starting","class_level":0},{"id":"w_starwand","name":"Starwand","size":"Light","type":"Artifact","damage":[{"type":"Astral","val":"1d3"}],"range":[{"type":"Range","val":5}],"tags":[{"id":"tg_accurate"},{"id":"tg_aetheric"}],"source":"starting","class_level":0},{"id":"w_stormbow","name":"Stormbow","size":"Heavy","type":"Bow","damage":[{"type":"Astral","val":"2d6"}],"range":[{"type":"Range","val":15}],"tags":[{"id":"tg_arcing"},{"id":"tg_push","val":1}],"source":"starting","class_level":0}]');
		
		tags_data = JSON.parse('[{"id":"tg_accurate","name":"ACCURATE","description":"Attacks made with this weapon or technique receive +1 Accuracy."},{"id":"tg_aetheric","name":"AETHERIC","description":"Attacks with this tag target A-Def instead of Dodge."},{"id":"tg_arcing","name":"ARCING","description":"This weapon or technique can be fired over obstacles, usually by lobbing a projectile in an arc. Attacks made with this weapon don’t require line of sight, as long as it’s possible to trace a path to the target; however, they are still affected by cover."},{"id":"tg_aura","name":"AURA {VAL}","description":"Auras affect certain characters within {VAL} spaces of the character that activates the aura. Characters can only have 1 aura activated at a time, and can change auras 1/turn"},{"id":"tg_auto_hit","name":"AUTO HIT","description":"This attack automatically hits, no attack roll is made."},{"id":"tg_blast","name":"BLAST {VAL}","description":"This is an AOE. It affects all characters within a radius of {VAL} spaces from the center space, including the center space. Cover and line of sight are calculated from the center space of the AOE. Users can be affected by their own Blast.","filter_ignore":true},{"id":"tg_breaking","name":"BREAKING","description":"This ability can only be used if the user is BREAKING (Stress equal to at least half of their Stress Cap)."},{"id":"tg_burst","name":"BLAST {VAL}","description":"This is an AOE. It affects all characters within a radius of {VAL} spaces from the occupied spaces of the target, excluding the target. Cover and line of sight are calculated from the center space of the AOE. Bursts that form a zone move with the target.","filter_ignore":true},{"id":"tg_close_blast","name":"CLOSE BLAST {VAL}","description":"This is an AOE. It operates like a Blast, but at least 1 space must be adjacent to the user, the user can’t be in the area, and cover/line of sight are calculated from the user.","filter_ignore":true},{"id":"tg_consumable","name":"CONSUMABLE {VAL}","description":"This weapon or system can only be used {VAL} times per quest. Some abilities can replenish them."},{"id":"tg_discord","name":"DISCORD {VAL}","description":"On a hit, this attack deals {VAL} Discord to its target. They immediately take that much discord damage, ignoring Armor, then mark {VAL} Discord on their sheet, adding it to any existing Discord. At the end of their turn, characters with Discord make an MGK check. On a success, they clear all marked discord; on a failure, they take damage equal to their total marked discord."},{"id":"tg_discord_self","name":"DISCORD {VAL} (SELF)","description":"Immediately after using this weapon or system, the user takes {VAL} Discord."},{"id":"tg_enchanted","name":"ENCHANTED","description":"This ability has been augmented with an enchantment."},{"id":"tg_enchantment","name":"ENCHANTMENT","description":"This enchantment can be applied to an ability. Each ability can only have one enchantment, and cannot have more than one of the same enchantment."},{"id":"tg_focus","name":"FOCUS {VAL}","description":"This ability costs {VAL} focus to use. Focus is a temporary resource used in combat scenes."},{"id":"tg_free_action","name":"FREE ACTION","description":"Characters can take free actions at any point during their turn, and they don’t count toward the number of minor or standard actions they take. They can also be used to take actions more than once per turn.","filter_ignore":true},{"id":"tg_homing","name":"HOMING","description":"Homing abilities ignore Line of Sight and the effects of cover. As long as the target is within Range and it is possible to reach them (basically as long as they aren’t in a box), they can be affected."},{"id":"tg_inaccurate","name":"INACCURATE","description":"Attacks made with this weapon or technique receive +1 Difficulty."},{"id":"tg_indirect","name":"INDIRECT","description":"Attacks with this tag ignore the effects of cover."},{"id":"tg_integrated","name":"INTEGRATED","description":"Integrated abilities can’t be destroyed or enchanted. They can’t be selected as an option from a wound roll."},{"id":"tg_invisible","name":"INVISIBLE","description":"This unit is Invisible","filter_ignore":true},{"id":"tg_invulnerable","name":"INVULNERABLE","description":"This equipment is immune to all damage.","filter_ignore":true},{"id":"tg_limited","name":"LIMITED {VAL}","description":"This weapon or system can only be used {VAL} times per quest."},{"id":"tg_line","name":"LINE {VAL}","description":"This is an Area of Effect (AoE). Its area is a straight line with a length of {VAL} spaces and a width of 1 space, drawn directly away from you in any direction.","filter_ignore":true},{"id":"tg_loot","name":"LOOT","description":"LOOT is a general tag for equipment that exists as random drops usually and are not balanced.","filter_ignore":true},{"id":"tg_mana","name":"MANA {VAL}","description":"This ability costs {VAL} mana to use."},{"id":"tg_minor_action","name":"MINOR ACTION","description":"This ability can be used as a Minor Action"},{"id":"tg_ordnance","name":"ORDNANCE","description":"This weapon can only be fired before the user moves or takes any other actions on their turn, excepting Protocols. The user can still act and move normally after attacking. Additionally, because of its size, this weapon can’t be used against targets in engagement with the user’s mech, and cannot be used for Overwatch."},{"id":"tg_overkill","name":"OVERKILL","description":"When rolling for damage with this weapon, any damage dice that land on a 1 cause the attacker to take 1 Stress, and are then rerolled. Additional 1s continue to trigger this effect."},{"id":"tg_piercing","name":"PIERCING","description":"Damage with this tag ignores Armor."},{"id":"tg_polymorph","name":"POLYMORPH","description":"Abilities with this tag modify a character’s form. A character can only be under the effect of one ability with this tag at a time."},{"id":"tg_pull","name":"PUSH {VAL}","description":"A type of forced movement. On a hit, the target is moved {VAL} spaces directly towards the origin."},{"id":"tg_push","name":"PUSH {VAL}","description":"A type of forced movement. On a hit, the target is moved {VAL} spaces directly away from the origin."},{"id":"tg_range","name":"RANGE ({VAL})","description":"The range at which an ability can be used.","filter_ignore":true},{"id":"tg_reach","name":"REACH {VAL}","description":"The range at which an ability can be used. Reach can be used to make Opportunity Attacks."},{"id":"tg_reaction","name":"REACTION","description":"This ability is used as a reaction."},{"id":"tg_recharge","name":"RECHARGE {VAL}+","description":"Once this system or weapon has been used, it can’t be used again until it is recharged. At the start of this NPC`s turn, roll 1d6: if the result is equal to or greater {VAL}, the equipment can be used again. Only one roll is required for each NPC, even if an NPC has multiple Recharge systems or weapons. If this NPC has two Recharge systems with target numbers of 4+ and 5+, a roll of 5 will recharge both.","filter_ignore":true},{"id":"tg_reliable","name":"RELIABLE {VAL}","description":"Reliable abilities always deal at least {VAL} damage, even if they would miss or deal less than {VAL} damage. Reliable damage inherits the ability’s damage type and tags. However, Reliable damage does not count as a hit, and doesn’t trigger any effects that require a hit."},{"id":"tg_reloading","name":"RELOADING","description":"Abilities with this tag must be reloaded after each use before they can be used again. The [1]RECOVER action and other abilities allow reloading."},{"id":"tg_resistall","name":"RESISTANCE (ALL)","description":"This unit has Resistance to all damage types","filter_ignore":true},{"id":"tg_resistance","name":"RESISTANCE","description":"Reduce all damage from a source you have resistance to by half"},{"id":"tg_round","name":"{VAL}/ROUND","description":"This ability can be used {VAL} number of times per round"},{"id":"tg_set_damage_type","name":"SET DAMAGE TYPE","description":"Allow player to set the damage type for this equipment (HIDDEN TAG)","hidden":true},{"id":"tg_set_damage_value","name":"SET DAMAGE VALUE","description":"Allow player to set the damage value for this equipment (HIDDEN TAG)","hidden":true},{"id":"tg_set_max_uses","name":"SET MAX USES","description":"Allow player to set the maximum uses for this equipment (HIDDEN TAG)","hidden":true},{"id":"tg_slide","name":"SLIDE {VAL}","description":"A type of forced movement. On a hit, the target is moved {VAL} spaces in any direction"},{"id":"tg_standard_action","name":"STANDARD ACTION","description":"This ability can be used as a Standard Action"},{"id":"tg_stress_self","name":"STRESS {VAL} (SELF)","description":"Immediately after using this weapon or system, the user takes {VAL} Stress."},{"id":"tg_summon","name":"SUMMON","description":"Summons are temporary characters under the control of another character. Summons have the following statistics unless otherwise indicated: Size 1/2, 5 HP, 10 Dodge/A-Def, 0 Speed, Save Target = Summoner’s save target, BULK/AGILITY/MIND/MAGIC 0. Summons can only be created in free spaces that they could normally enter (you can’t summon into impassable terrain, for example). Summons are characters with a standard action, standard movement, and minor action. However, they can’t take any actions or movement unless they have an ability that lets them take actions or have a speed. Their turn is their summoner’s turn, and if they can take actions/move, they can do so at any point in their summoner’s turn. Summons are defeated if they are reduced to 0 HP. Summons can be dismissed as a free action by their summoner. Summons last until dismissed, the end of the scene, or until defeated. Abilities that create summons can only have 1 summon from that instance of that ability at a time. If a summon is defeated or dismissed, new ones can be made from that same ability. Summons can’t create summons."},{"id":"tg_temp_hp","name":"TEMP HP","description":"This ability provides HP that disappears at the end of the scene or when a specified condition is met, stacking on top of existing HP. Temporary HP does not stack with itself unless otherwise stated."},{"id":"tg_thrown","name":"THROWN {VAL}","description":"Abilities with this tag can be thrown, making a melee attack against a target within X spaces. Thrown attacks are affected by cover. If throwing a weapon, it lands in a space adjacent to the target (thrower’s choice), and must be picked up as a free action while adjacent to it before it can be used again."},{"id":"tg_trap","name":"TRAP","description":"Traps are effects that modify a space. Traps are placed in free adjacent spaces, and arm at the end of the turn they are placed. Characters that move into or adjacent to a trap’s space trigger it, activating its effects and then removing it from play. Traps are permanently HIDDEN, but can be automatically detected with the [3]SEARCH action. A detected trap can be disarmed by passing an AGILITY check as a minor action when moving into or adjacent to a trap’s space before it is triggered. On a success, the trap is removed from play without being activated. On a failure, the trap activates as normal. Traps are visible to all players on the map."},{"id":"tg_turn","name":"{VAL}/TURN","description":"This ability can be used {VAL} number of times in any turn."},{"id":"tg_unbreakable","name":"UNBREAKABLE","description":"This ability cannot be destroyed. Unbreakable abilities can’t be selected to be destroyed if there are non-unbreakable options left. If an Unbreakable item is selected from a Wound or Overstress roll, it becomes a DAZED result instead.","filter_ignore":true},{"id":"tg_unique","name":"UNIQUE","description":"Characters can only equip one copy of an ability with this tag at a time."}]');
    });

    class_data = JSON.parse('[{"class":"Aegis","role":"Defender","scope":"10","HP":"6","recoveries":"3","dodge":"6","speed":"4","stress_cap":"7","memory":"7","adef":"10","mana":"5","save_target":"10","weapon_slots":["[LIGHT]","[MAIN]",""],"support_slots":["[LIGHT]","[LIGHT]","",""],"traits":[{"name":"MANA SHIELDS","desc":"The Aegis can spend Mana as if it were Focus. "},{"name":"ABJURER’S WARD","desc":"Gain the Ward reaction."},{"name":"","desc":""},{"name":"Ward","freq":"Reaction, Mana 1","trigger":"An ally within Scope would take Physical, Astral, Lunar, or Force damage, before Armor and resistances.","effect":"Effect: Reduce the damage taken by 1d6. You can spend 1 mana to reroll the dice. You can reroll multiple times."}],"limit_break":{"name":"Perfect Shield","action":"Limit Break, Special","desc":"This Limit Break can be activated at any time during a combat scene. When activated, the Aegis chooses an ally within Scope and Line of Sight. Until the end of this Phase in the next round, all damage and Stress the ally receives is reduced to 0."}},{"class":"Alchemist","role":"Support","scope":"8","HP":"7","recoveries":"5","dodge":"7","speed":"5","stress_cap":"6","memory":"5","adef":"8","mana":"3","save_target":"11","weapon_slots":["[MAIN]","",""],"support_slots":["[LIGHT]","[MAIN]","[MAIN]","[MAIN]"],"traits":[{"name":"POTION BELT","desc":"The Alchemist gains +1 charges with any ability with the Consumable tag. During a SHORT REST, they can spend 1 Recovery to regain all charges of a Consumable ability."},{"name":"POTION INJECTOR","desc":"The Alchemist’s Consumable abilities can be used up to [Range 8], and effects that would only apply to the Alchemist (like healing potions) can apply to willing allies within that range. As their Standard Action during PHASE (3): SKIRMISH or later, the Alchemist can use a Support Item with a Minor Action activation. "},{"name":"SANITIZING VAPORS","desc":"At the end of the Alchemist’s turn, an ally within [Range 3] can clear up to 1 Stress, or up to 2 if the ally is BREAKING."}],"limit_break":{"name":"Philosopher Stone","action":"Limit Break, Minor","desc":"As a Minor Action, the Alchemist reveals their Philosopher’s Stone. It has 6 charges. The Alchemist and allies in the scene can use the Philosopher’s Stone charges in place of spending CONSUMABLE charges or mana, at a rate of 1 Philosopher’s Stone charge per CONSUMABLE charge or single point of mana. Items/abilities with no charges left can still be used if they use the Philosopher’s Stone’s charges."}},{"class":"Arsenal","role":"Striker","scope":"5","HP":"10","recoveries":"5","dodge":"8","speed":"5","stress_cap":"5","memory":"5","adef":"6","mana":"3","save_target":"10","weapon_slots":["[MAIN]","[MAIN]","[HEAVY]"],"support_slots":["[LIGHT]","[LIGHT]","[MAIN]",""],"traits":[{"name":"ARMIGER","desc":"The Arsenal has the Phantom Armory Innate weapon, which is equipped for free.  Phantom Armory        Melee or Ranged Weapon: Innate, Unique Ranged Profiles         Any Artifact: Aetheric [Range 10] [1d6 Astral]         Any Bow: Arcing [Range 10] [1d6 Physical]         Any Magitech: Reliable 2 [Range 5, Reach 3]         [1d6 Force] Melee Profiles         Any Blade: Accurate [Reach 1] [1d6+1 Physical]         Any Club: Push 2 [Reach 1] [1d6+1 Physical]         Any Longarm: [Reach 2] [1d6+1 Physical] As a Minor Action, this weapon gains one of the above profiles and a Size of your choice, which last until the end of the scene or until changed. 1/round when the Arsenal would take damage from a non-aetheric attack, they can choose one of the profiles and roll its damage, reducing the damage taken by that amount (after armor and resistance). That profile can’t be used until the end of the scene. The Arsenal can’t use this effect if they are unable to take Reactions."},{"name":"FLEX WEAPONS","desc":"The Arsenal can choose to treat any of their MAIN weapon slots as LIGHT/LIGHT slots, or their HEAVY slots as MAIN/LIGHT slots."},{"name":"WALKING ARMORY","desc":"When the Arsenal uses (1) REFRESH, they can spend 1 mana to repair one of their destroyed weapons or support items. During a SHORT REST, they can repair one weapon and support item for free."}],"limit_break":{"name":"Cycle Weapons","action":"Limit Break, (5) BRAWL","desc":"The Arsenal repairs all their destroyed weapons, reloads all weapons, and regains all Phantom Armory profiles. They can make an attack with every weapon they have, including SLOW weapons."}},{"class":"Assassin","role":"Striker","scope":"8","HP":"8","recoveries":"3","dodge":"11","speed":"6","stress_cap":"5","memory":"6","adef":"7","mana":"2","save_target":"10","weapon_slots":["[LIGHT]","[MAIN/LIGHT]",""],"support_slots":["[LIGHT]","[LIGHT]","[MAIN]",""],"traits":[{"name":"ASSASSINATE","desc":"1/round, the Assassin can deal +1d6 bonus damage on a hit with a melee attack roll if the Assassin is HIDDEN or if the Assassin is the only character adjacent to them."},{"name":"PREPARATION","desc":"At the end of each of their turns while HIDDEN, the Assassin gains 1 Prep, to a maximum of 6. After they make an attack roll, they can decide to spend any their Prep, gaining a +1 bonus on the attack roll per point of Prep spent. Prep lasts until the end of the scene or until spent."},{"name":"","desc":""}],"limit_break":{"name":"Exterminate","action":"Limit Break, Free Action","desc":"Until the end of the scene, the Assassin’s Preparation trait grants 1 Prep at the end of each of their turns, or 2 if they are HIDDEN, which replaces their normal Prep gain. Assassinate now deals 1d6+X bonus damage, where X = the amount of Preparation spent on the attack."}},{"class":"Berserker","role":"Striker","scope":"5","HP":"16","recoveries":"6","dodge":"8","speed":"6","stress_cap":"6","memory":"4","adef":"6","mana":"1","save_target":"10","weapon_slots":["[MAIN]","[HEAVY]",""],"support_slots":["[LIGHT]","[LIGHT]","",""],"traits":[{"name":"ENDLESS ENDURANCE","desc":"Removing a WOUND or OVERSTRESS during a SHORT REST only costs the Berserker 1 Recovery."},{"name":"RECKLESS","desc":"1/round, the Berserker can deal +1d6 bonus damage on a hit with a melee attack roll. If the Berserker uses this ability, attack rolls against the Berserker gain +1 ACC until the end of its next turn."},{"name":"RELENTLESS","desc":"1/round when the Berserker scores a critical hit, they can make an additional attack with the same weapon/support item/technique."}],"limit_break":{"name":"PRIMAL STRIKE","action":"Limit Break","desc":"When you hit with a melee attack, you can activate this Ultimate. All damage dice from the attack, including bonus damage and extra sources of damage, are treated as if they had rolled the maximum value once. "}},{"class":"Chronomancer","role":"Controller","scope":"10","HP":"6","recoveries":"3","dodge":"7","speed":"5","stress_cap":"6","memory":"6","adef":"9","mana":"5","save_target":"12","weapon_slots":["[LIGHT]","[LIGHT]",""],"support_slots":["[LIGHT]","[LIGHT]","",""],"traits":[{"name":"UNDO","desc":"1/round, the Chronomancer can take actions from an earlier phase, instead of during PHASE 8: DELAY. They take 1 Stress for every phase that has passed since the action’s normal phase. For example, if the Chronomancer uses (1) DEFEND during PHASE 5: BRAWL, they would take 4 Stress. "},{"name":"PLUCK THE THREADS OF TIME","desc":"Gain the Pluck the Threads of Time reaction."},{"name":"","desc":""},{"name":"Pluck the Threads of Time","freq":"Reaction, 1/round","trigger":"Trigger: A character within Scope makes an attack roll, saving throw, or check.","effect":"Effect: Spend 1 mana to force them to reroll the die, taking the 2nd result. "}],"limit_break":{"name":"Time Stop","action":"Limit Break","desc":"At the start of a round, the Chronomancer can activate this ultimate to restructure the Phase order that round. They can put the Phases in any order that round, with the exception of PHASE 8: DELAY, which is always the last phase in a round. These changes last for 1 round."}},{"class":"Demon Hunter","role":"Striker","scope":"8","HP":"10","recoveries":"4","dodge":"8","speed":"6","stress_cap":"9","memory":"5","adef":"8","mana":"2","save_target":"10","weapon_slots":["[LIGHT]","[MAIN/LIGHT]",""],"support_slots":["[LIGHT]","[LIGHT]","",""],"traits":[{"name":"CORRUPTION","desc":"The Demon Hunter has a Corruption Die, a d6 that starts at 1. When they take Stress, increase the corruption die by 1, to a maximum of 6. At 2 Corruption, the Demon Hunter gains +1 Force bonus damage on hits with weapon and spell attacks. This increases to +2 Force bonus damage at 4 Corruption. At 6 Corruption, they can activate their Demon Form trait."},{"name":"DEMON FORM","desc":"Free Action | Polymorph If the Demon Hunter has 6 Corruption, they can reset their Corruption Die to 1 and assume a demonic form until the start of their next turn. While in this form, they gain the following benefits: •Bonus damage from Corruption increases to +3 Force bonus damage. •Bonus damage from any source becomes Discord. •Gain Resistance to Stress from other characters. •They can Fly. •Gain +1 Armor."},{"name":"Infernal Aether","desc":"As a Minor Action, the Demon Hunter can give themself Stress to regain mana. Every [3 Stress] they take allows them to regain 1 mana."}],"limit_break":{"name":"Become the Monster","action":"Limit Break, Free Action","desc":"The Demon Hunter immediately assumes its Demon Form regardless of its current Corruption Die. Until the end of the scene, their Corruption Die resets to 3 instead of 1. Reset the Corruption Die."}},{"class":"Demonologist","role":"Controller","scope":"12","HP":"7","recoveries":"2","dodge":"7","speed":"5","stress_cap":"6","memory":"6","adef":"12","mana":"4","save_target":"11","weapon_slots":["[MAIN]","",""],"support_slots":["[LIGHT]","[MAIN]","",""],"traits":[{"name":"DEMON LEXICON","desc":"The Demonologist has the following demons, which are creatures with the SUMMON tag. They can be summoned as a VOLLEY action, costing 2 mana. These summons have the Demonologist’s Dodge and A-Def, can move up to their speed during the Demonologist’s turn, and add the Demonologist’s GRIT to their HP. The Demonologist can only summon one of these demons at a time. The Demonologist can dismiss these summons as a free action. • Flameskipper. (Size ½, 5 HP, 0 armor, Dodge/A-Def=yours, Speed 3) At the end of the Demonologist’s turn, the Flameskipper chooses one target within Range 5. They must pass a MGK save or take [3 Astral]."},{"name":"DEMON LEXICON (CONTINUED)","desc":"• Painlash. (Size 1, 8 HP, 0 Armor, Dodge/A-Def=yours, Speed 4) At the end of the Demonologist’s turn, enemies adjacent to the Painlash must pass a BLK save or be DAZED and SLOWED until the end of their next turn.   Soultracker. (Size 1, 5 HP, 0 Armor, Dodge/A-Def=yours, Speed 5) Enemies that start their turn adjacent to this summon are MARKED.  Voidheart. (Size 2, 10 HP, 0 Armor, Dodge/A-Def=yours, Speed 4) 1/round the Voidheart can INTERPOSE without spending Focus."},{"name":"SACRIFICE","desc":"As a Minor Action, the Demonologist can destroy one of their summons within Scope. When they do so, they can choose one of the following: • Boost. The Demonologist gains +1 ACC on attacks, checks, and saves until the end of their next turn. • Essence Explosion. All characters within Burst 1 of the summon must make an AGI save, taking [2d6 Force] on a failed save, or half damage on a success. • Life Link. The Demonologist gains 4 temporary HP and regains 1 Mana."}],"limit_break":{"name":"LEGION","action":"Limit Break | (3) VOLLEY | Mana 1","desc":"The Demonologist can immediately create up to 4 summons drawn from all of their abilities that create summons, ignoring the normal summon limit per ability, and summoning them within the ability’s normal summoning restrictions. At the end of each of the Demonologist’s turns, if there are any summons that exceed an ability’s normal summon limit, one of those summons in the scene is automatically affected by the Demonologist’s Sacrifice trait, regardless of range and Line of Sight. Until the end of the scene, if the defeat of one of the Demonologist’s summons would result in the destruction of the underlying ability (like Gert’s Backbone), the ability is only destroyed if the last copy of that summon is defeated."}},{"class":"Dragon Rider","role":"Striker","scope":"5","HP":"9","recoveries":"5","dodge":"7","speed":"6","stress_cap":"4","memory":"5","adef":"7","mana":"3","save_target":"11","weapon_slots":["[LIGHT]","[MAIN]","[HEAVY]"],"support_slots":["[MAIN]","[MAIN]","",""],"traits":[{"name":"FORCEFUL JAB","desc":"When the Dragon Rider hits with a non-thrown melee longarm attack, they can Push the target until they are a number of spaces away from the Dragon Rider equal to the weapon’s Reach."},{"name":"SKYHUNTER","desc":"The Dragon Rider has +1 ACC on attacks against flying characters, ignores the DIF for making melee attacks against Flying characters, and causes ENGAGEMENT against them as normal."},{"name":"SKYTHRUST","desc":"As a Minor Action, the Dragon Rider can take [1 Stress] to fly up to half their Speed in a straight line. If they fly at least 2 spaces, their next melee attack that turn against an adjacent character gains +1 ACC."}],"limit_break":{"name":"Dragon Echo","action":"Limit Break, Summon, Minor","desc":"(Dragon: Size 3, 15 + Your Grit HP, 10 Dodge/ A-Def, Speed 6) The Dragon Rider summons an echo of their dragon in free spaces within Scope. The Dragon is a Summon that can Fly, and can move up to its Speed during the Dragon Rider’s turn. Allies of the Dragon can share spaces with the dragon, and any allies fully within the dragon’s spaces can move with it when it moves. The Dragon lasts until the end of the scene or until defeated. The dragon echo gains a standard action it can use during the Dragon Rider’s turn. It can only use its standard action on the following attack, adding the Dragon Rider’s GRIT to the attack roll.   Dragon Echo Breath Weapon. [Melee Weapon] [Close Blast 2] [3 Astral + 1 Discord]."}},{"class":"Druid","role":"Controller","scope":"10","HP":"9","recoveries":"4","dodge":"7","speed":"4","stress_cap":"6","memory":"6","adef":"9","mana":"4","save_target":"11","weapon_slots":["[LIGHT]","[MAIN]",""],"support_slots":["[LIGHT]","[LIGHT]","",""],"traits":[{"name":"BRIAR PATCH","desc":"When the Druid subjects a character to forced movement, a briar patch is created in the spaces the character occupied and moved through (excluding their ending positions). Briar patches are considered difficult terrain, and enemies that enter one for the first time in a turn take [3 Piercing Physical].  The Druid can remove any briar patches of their choice within Scope as a Minor Action."},{"name":"NATURE`S PATH","desc":"When the Druid Pushes, Pulls, or Slides a character, they can spend mana to increase the amount of the forced movement by +1 for every mana spent. The Druid can’t use this trait if they are SILENCED or STUNNED."},{"name":"ROOT","desc":"When the Druid hits with an Opportunity Attack, instead of dealing damage, the Druid can choose to IMMOBILIZE the target until the start of the target’s next turn."}],"limit_break":{"name":"Tempest Storm","action":"Limit Break, Channel","desc":"Channel a furious storm. Channel: All adjacent characters of your choice are pushed 1 space away from you. If you stop channeling this ability before releasing for any reason, the ultimate is not expended.  Release: Create a 4x4 zone within Scope. Characters in one of the zone’s spaces when it is created or those that enter one of its spaces take [1d6+4 Physical]. A character can’t take this damage more than 1/turn. If a character ends their turn in one of the zone’s spaces, you can SLIDE them up to 3 spaces. The area inside the storm is Difficult Terrain.  As a Minor Action, you can spend 1 mana to move the zone up to 3 spaces in a straight line. The zone lasts until the end of the scene."}},{"class":"Equinox","role":"Artillery","scope":"12","HP":"6","recoveries":"3","dodge":"6","speed":"4","stress_cap":"5","memory":"7","adef":"10","mana":"5","save_target":"11","weapon_slots":["[MAIN]","",""],"support_slots":["[LIGHT]","[LIGHT]","",""],"traits":[{"name":"DAY / NIGHT CYCLE","desc":"The Equinox has two special resources, Sun and Moon. The Equinox can only have one of these resources at a time, and loses them at the end of a combat scene. As a Minor Action, the Equinox can go to 1 Sun, 1 Moon, or remove all their Sun and Moon. If they already have Sun or Moon, they can instead increase it by +1, to a maximum of 2. Sun and Moon apply the following effects to certain abilities when they are used. Sun. The Equinox’s spells and artifact weapons that have an AOE have their size increased by +1 (Line AOEs have their width increased by +1) for each Sun they have. However, they must spend 1 mana each time they use a spell or artifact weapon with an AOE. If they can’t, they immediately lose all their Sun.  Moon. The Equinox’s Scope and range with artifact weapons increase by +4 for each Moon they have. However, they take [1 Stress] each time they target something with a spell or artifact weapon attack beyond their normal Scope or weapon’s range. "},{"name":"MAGE TOWER","desc":"If the Equinox hasn’t moved since the start of their last turn, they gain the following benefits, which don’t stack: Surecast. Ranged spell attacks and artifact weapon attacks gain +1 Accuracy.  Sharpcast. CHANNEL spells impose +1 Difficulty on any saves it triggers."},{"name":"","desc":""}],"limit_break":{"name":"TETRAFLARE","action":"Limit Break | (2) CHANNEL | Arcing, Mana 1","desc":"If the Equinox stops channeling this ability before releasing for any reason, the Limit Break is not expended Release: The Equinox can apply any amount of sun and moon to this ability, to a maximum of 2 each, and it is affected by both as if it were a spell. The Equinox creates a [Blast 1] area within Scope. A character in the center point of the blast is auto-hit by a spell attack for [2d6+2 Force] damage. All other characters in the blast area are auto-hit for half as much damage. The Equinox can spend up to 3 additional mana when they release this ability, increasing the damage by [1d6 Force] for each additional mana spent."}},{"class":"Gravewalker","role":"Defender","scope":"10","HP":"8","recoveries":"6","dodge":"6","speed":"4","stress_cap":"5","memory":"5","adef":"8","mana":"3","save_target":"10","weapon_slots":["[MAIN]","[HEAVY]",""],"support_slots":["[MAIN]","[HEAVY]","",""],"traits":[{"name":"HARVEST","desc":"1/round when an enemy within Scope is defeated, the Gravewalker gains 2 Focus."},{"name":"TOMBSTONE","desc":"As a Minor Action, the Gravewalker can spend 1 mana to summon a tombstone in a free space within Scope. The tombstone is a summon (Size ½, 5 HP, Dodge/A-Def 10). The Gravewalker can have up to 2 tombstones summoned at a time, and can dismiss any of them as a free action.  Gain the Written Name reaction."},{"name":"","desc":""},{"name":"Written Name","freq":"Reaction","trigger":"Trigger: A character within range 5 of a tombstone takes damage.","effect":"Effect: Spend 1 Focus to grant them RESISTANCE to that source of damage. If the triggering damage was from an AOE, you can continue to use this reaction on targets in the AOE."}],"limit_break":{"name":"THAT WHICH IS ALREADY DEAD","action":"Limit Break, Special","desc":"This Limit Break can be activated at any time during a combat scene. Until the end of the scene, the Gravewalker can’t take a 4th Wound, and doesn’t make any Wound Rolls. When they would take their 4th wound, they return to their HP maximum and carry over any excess damage."}},{"class":"Gunslinger","role":"Artillery","scope":"8","HP":"8","recoveries":"3","dodge":"10","speed":"5","stress_cap":"5","memory":"5","adef":"6","mana":"3","save_target":"11","weapon_slots":["[LIGHT/LIGHT]","[MAIN]","[HEAVY]"],"support_slots":["[LIGHT]","[MAIN]","",""],"traits":[{"name":"FAST RELOAD","desc":"1/round when the Gunslinger attacks with a RELOADING weapon, roll a d6. On a 6+, it reloads. The Gunslinger can spend mana to increase the result of this roll, at +1 per 1 mana spent."},{"name":"STARE DOWN","desc":"When the Gunslinger reloads a weapon, they gain access to the Quick Draw reaction until they use it, or until start of their next turn."},{"name":"","desc":""},{"name":"QUICK DRAW","freq":"Reaction (1/round)","trigger":"Trigger: Another character makes an attack.","effect":"Effect: The Gunslinger can attack them with a weapon before their attack."}],"limit_break":{"name":"Customized Ammo","action":"Limit Break, Free Action","desc":"Until the end of the scene, you gain access to the following special ammunition types. Each piece of ammunition can be used once. You can choose to us a piece of ammunition when making a ranged weapon attack. • Hotshot. Draw a straight line between the Gunslinger and the attack’s target, and place a [Blast 2] area centered on any point of this line. Characters in the area must make an AGI save, taking [2d6 Astral] on a failure, or half damage on a success. The area becomes dangerous terrain (AGI Save, 5 Astral damage) until the end of the scene • Mindjack Round. On Hit: Until the end of the target’s next turn or until they are dealt damage by you or your allies, they consider you and your allies as its allies, and its former allies as enemies. On Miss: The target is unable to target you with hostile effects until the end of its next turn. • Piercer. The attack gains PIERCING and becomes a Line attack with a distance up to the attack’s range. The attack gains Reliable 10 against objects and terrain. • Shock Round. On Hit: The target is STUNNED and SLOWED until the end of their next turn. On Miss: The target is SLOWED and can’t take Reactions until the end of their next turn."}},{"class":"Hexblade","role":"Striker/Controller","scope":"10","HP":"8","recoveries":"4","dodge":"7","speed":"5","stress_cap":"5","memory":"6","adef":"8","mana":"4","save_target":"11","weapon_slots":["[LIGHT/LIGHT]","[MAIN]",""],"support_slots":["[LIGHT]","[LIGHT]","[LIGHT]",""],"traits":[{"name":"HEX","desc":"The Hexblade gains the following Innate spell, which is equipped for free.  Hex[Ranged Spell Attack] Minor Action | Auto-Hit, Innate, Mana 1, Unique [Range = Scope] This attack auto-hits. The target is hexed, which lasts until the end of the scene or until the Hexblade uses this ability again. When you defeat your hexed target, you regain 1 mana.  1/round the Hexblade can deal +1d6 bonus damage on a successful weapon attack roll against a hexed enemy.  1/round when the Hexblade inflicts a condition on a hexed enemy, they can also inflict the condition on a different enemy within [Range 5] of the hexed target. This spread condition lasts until the end of the non-hexed target’s next turn."},{"name":"MISERY","desc":"The Hexblade gains +1 ACC on attacks against characters that have a condition."},{"name":"","desc":""}],"limit_break":{"name":"Doom Hex","action":"Limit Break, Free Action","desc":"A character affected by the Hexblade’s Hex becomes DAZED, MARKED, BLINDED, SUNDERED, SILENCED, SLOWED, and WEAKENED. At the end of each of their turns while they have one of these conditions, they make a MAGIC save. On a success, they remove one of these conditions of their choice."}},{"class":"Knightmare","role":"Defender/Controller","scope":"5","HP":"9","recoveries":"4","dodge":"6","speed":"6","stress_cap":"6","memory":"5","adef":"7","mana":"3","save_target":"11","weapon_slots":["[LIGHT]","[MAIN]","[HEAVY]"],"support_slots":["[MAIN]","[HEAVY]","",""],"traits":[{"name":"THE CHAINS OF DESPAIR","desc":"The Knightmare gains the Chains of Despair reaction."},{"name":"THE INESCAPABLE NIGHTMARE","desc":"When the Knightmare would be able to make a melee reaction attack, they can instead make a (5) GRAPPLE attack instead.  1/round if an enemy would lose the GRAPPLED status by breaking adjacency with the Knightmare, the Knightmare can spend 1 mana after their movement ends to teleport them to a free space adjacent to the Knightmare. The Knightmare can’t use this trait if they are STUNNED."},{"name":"THE WEIGHT OF INEVITABILITY","desc":"The Knightmare is always considered at least Size 3 for the purposes of (5) GRAPPLE and (5) SHOVE. They can use reactions while GRAPPLED"},{"name":"Chains of Despair","freq":"Reaction | Focus 1","trigger":"Trigger: An enemy within [Range 3] makes an attack.","effect":"Effect: The Knightmare pulls the enemy to the closest free space adjacent to them, and the attack must include the Knightmare as one of its targets. The Knightmare can spend +1 Focus to make a (5) GRAPPLE attack against the enemy after the pull as a part of this reaction."}],"limit_break":{"name":"Trapped in a Dream","action":"Limit Break | (5) GRAPPLE","desc":"All enemies of the Knightmare’s choice within [Range 5] of it are pulled to the closest spaces adjacent to it and are GRAPPLED by it. Escaping from this grapple requires a Standard Action during any Phase instead of a Minor Action. Enemies grappled by this ability must include the Knightmare as one of their targets whenever they attack."}},{"class":"Lifeweaver","role":"Support","scope":"12","HP":"6","recoveries":"10","dodge":"7","speed":"5","stress_cap":"6","memory":"6","adef":"8","mana":"4","save_target":"10","weapon_slots":["[MAIN]","",""],"support_slots":["[LIGHT]","[LIGHT]","",""],"traits":[{"name":"HEALER`S PACT","desc":"During a SHORT REST or when an ally within [Range 5] spends or loses a recovery, the Lifeweaver can choose to spend their recoveries for the ally instead."},{"name":"QUICK STITCH","desc":"As a Reaction, when a BLOODIED ally within the Lifeweaver’s Scope starts their turn, the Lifeweaver can spend 1 mana to restore up to 1d6 HP to the ally."},{"name":"PURGE MALADY","desc":"As a Minor Action, the Lifeweaver can spend 2 mana to remove a condition from themselves or an ally within Scope."}],"limit_break":{"name":"Second Life","action":"Limit Break, Channel","desc":"(2) CHANNEL (6) Release: If the Lifeweaver stops channeling this ability before releasing for any reason, the limit break is not expended. Choose either an ally within Scope or name a defeated ally. The ally is restored to their HP maximum, regains all of their recoveries and mana, clears all their Stress, conditions, Discord, and clears two WOUNDS and OVERSTRESS. If the ally was defeated, they return to play in free spaces adjacent to the Lifeweaver."}},{"class":"Paladin","role":"Defender/Support","scope":"5","HP":"9","recoveries":"6","dodge":"6","speed":"5","stress_cap":"7","memory":"5","adef":"7","mana":"2","save_target":"10","weapon_slots":["[MAIN]","[HEAVY]",""],"support_slots":["[MAIN]","[HEAVY]","",""],"traits":[{"name":"LAYERED AURAS","desc":"The Paladin gains the Aura of Inspiration Innate spell, which is equipped for free. The Paladin can have two auras active at once, but they must be from different abilities.  Aura of Inspiration [Spell] Free Action | Aura 5, Innate, Unique This aura affects the Paladin an all allies within its Range.  Aura of Inspiration. Characters gain +1 {Accuracy} on checks and saves."},{"name":"GUARDIAN ANGEL","desc":"As a Minor Action, the Paladin can select an ally within Line of Sight, which lasts until the end of the scene or until the Paladin uses this ability again. The Paladin can INTERPOSE for this ally as long as they are within Scope, teleporting to a free space adjacent to the ally."},{"name":"RETRIBUTION","desc":"That Paladin can COUNTERATTACK 2/round instead of 1/round.  1/Round as part of the INTERPOSE reaction, the Paladin can COUNTERATTACK the attacker before the triggering attack happens. This COUNTERATTACK doesn’t require Focus."}],"limit_break":{"name":"Bastion of Resolve","action":"Limit Break, Special","desc":"This Limit Break can be activated at any time during a combat scene. When activated, the Paladin gains the following benefits, which last until the end of this Phase in the next round. •        They clear all their Conditions. •        They gain Resistance to all damage. •        Their Reach with weapons that have Reach increases by +2. •        They can use Guardian Angel on all allies."}},{"class":"Phoenix","role":"Artillery","scope":"15","HP":"7","recoveries":"2","dodge":"6","speed":"4","stress_cap":"7","memory":"6","adef":"10","mana":"5","save_target":"11","weapon_slots":["[LIGHT]","[MAIN]",""],"support_slots":["[LIGHT]","[LIGHT]","",""],"traits":[{"name":"BURNING SPELLS","desc":"The Phoenix deals +1 Discord with all weapons and abilities that deal Discord."},{"name":"BURN PROOF","desc":"The Phoenix has resistance to Astral and Discord damage."},{"name":"","desc":""}],"limit_break":{"name":"Supervolcano","action":"Limit Break, (2) CHANNEL | Mana 2","desc":"Create a Size 3 volcano within Scope (ignoring Line of Sight), which counts as a piece of terrain. The volcano destroys any non-objective terrain and objects in its spaces. Characters in its spaces are considered on top of the volcano.  Mark 6 spaces as lava flows, which must be adjacent to each other or the volcano. These spaces are Dangerous Terrain (AGI, 5 Discord). As a Minor Action on subsequent turns, you can spend 1 mana to add up to 3 more lava flow spaces, or remove up to 3 existing lava flow spaces.  The volcano and lava flows last until the end of the scene."}},{"class":"Riftblade","role":"Artillery","scope":"15","HP":"8","recoveries":"3","dodge":"7","speed":"4","stress_cap":"5","memory":"6","adef":"8","mana":"4","save_target":"10","weapon_slots":["[LIGHT]","[HEAVY]",""],"support_slots":["[LIGHT]","[LIGHT]","[LIGHT]","[MAIN]"],"traits":[{"name":"RIFT","desc":"As a Minor Action, the Riftblade can spend 2 mana to place a rift in a free space within [Range 20], which doesn’t require Line of Sight.  Range, Reach, and Line of Sight for everything (except placing another rift) can be drawn both to and from the Riftblade as if the Riftblade were standing in the rift’s space.  The rift’s space is considered occupied by the Riftblade. The rift itself is not an object and cannot be directly interacted with or affected by anything. Rifts last until the end of the scene or until the Riftblade uses this ability again."},{"name":"RIFTCUTTER","desc":"The Riftblade gains the following Innate weapon, which is equipped for free. Riftcutter [WEAPON, Melee] Light Magitech, Accurate, Piercing, Innate, Unique [Reach 1] [3 Physical] This weapon ignores Resistances and Immunities."},{"name":"","desc":""}],"limit_break":{"name":"Gateway","action":"Limit Break, Minor Action","desc":"The Riftblade creates two Size 3 gateways on free solid surfaces within [Range 15], which don’t require Line of Sight, aren’t obstructions, and don’t block Line of Sight. 1/turn when a character fully enters a gateway, they are immediately teleported to the other gateway in spaces of their choice so they are fully within the gateway. If they cannot end this teleport fully within the gateway (because too many spaces are occupied), the teleport fails. Gateways last until the end of the scene."}},{"class":"Rimeguard","role":"Defender","scope":"8","HP":"1","recoveries":"5","dodge":"6","speed":"5","stress_cap":"5","memory":"5","adef":"9","mana":"4","save_target":"11","weapon_slots":["[MAIN]","[MAIN]",""],"support_slots":["[MAIN]","[HEAVY]","",""],"traits":[{"name":"FROST ARMOR","desc":"As a Minor Action, the Rimeguard can spend 1 Focus to give an ally within Scope temp HP equal to half the Rimeguard’s current temp HP (to a minimum of 1). The Rimeguard can increase this amount by reducing their own temp HP by 1 for every +1 temp HP, to a maximum of 10 temp HP received."},{"name":"ICY VEINS","desc":"The Rimeguard has Resistance to Lunar damage. The Rimeguard starts each combat scene with 6 temp HP, and refreshes this amount whenever they take a Wound. When the Rimeguard gains Focus, they can choose for any amount of it to become temp HP. Temp HP on the Rimeguard can stack to a maximum of 10 temp HP. The Rimeguard can exceed this amount of temp HP if a single source of temp HP would put them over this amount, but they can’t stack additional temp HP past it."},{"name":"RIMEHEART","desc":"As a Minor Action, the Rimeguard can increase the temp HP of an ally within Scope by 2, to a maximum of 10."}],"limit_break":{"name":"ABSOLUTE ZERO","action":"Limit Break, Minor Action","desc":"The Rimeguard and all allies in the scene clear all Stress and reduce their current SURGE level by 1 (to a minimum of level 1, 2 Stress)."}},{"class":"Seeker","role":"Artillery/Controller","scope":"20","HP":"6","recoveries":"3","dodge":"8","speed":"5","stress_cap":"4","memory":"6","adef":"9","mana":"3","save_target":"11","weapon_slots":["[MAIN]","[HEAVY]",""],"support_slots":["[LIGHT]","[MAIN]","",""],"traits":[{"name":"MARKSMAN`S EYE","desc":"The Seeker`s allies gain +2 ACC instead of +1 ACC when consuming a MARK on an attack against a target within the Seeker’s Scope."},{"name":"SEEKER`S SIGHT","desc":"The Seeker can spend 1 mana to (3) MARK as a Minor Action."},{"name":"GUIDED SHOT","desc":"Gain the guided shot reaction"},{"name":"Guided Shot","freq":"Reaction","trigger":"Trigger: A ranged or thrown attack roll against an enemy in the Seeker’s Scope misses.","effect":"Effect: The attack roll misses, but the attacker can reroll the attack roll against a different target within [Range 5] of the original target. A target can’t be hit more than once by the same attack."}],"limit_break":{"name":"Heavenly Starfall","action":"Limit Break, (3) SKIRMISH","desc":"Create 3 [Blast 2] zones within [Range 40] that can’t overlap, and don’t require Line of Sight. All enemies in one of those zones must make an AGI save, taking [1d3+1 Force] on a failure, or half damage on a success. Enemies only take this damage once, regardless of how many zones they are in. As a Minor Action while any zones exist, the Seeker can spend 1 mana to (3) MARK all enemies in the zones and make them DAZED until the end of their next turn. At the end of each of the Seeker’s turns, one of the zones disappears."}},{"class":"Shadebinder","role":"Controller","scope":"10","HP":"6","recoveries":"5","dodge":"7","speed":"4","stress_cap":"5","memory":"6","adef":"7","mana":"4","save_target":"12","weapon_slots":["[LIGHT]","",""],"support_slots":["[LIGHT]","[LIGHT]","[MAIN]","[MAIN]"],"traits":[{"name":"COMMAND PARTNER","desc":"Once during each of the Shadebinder’s turns, one of their summons within Scope can use one of the Shadebinder’s actions against a target within the Shadebinder’s Scope. The Shadebinder spends the action and pays any costs, like mana or consumable charges, but the summon is considered to be the one activating it. If the action is a (2) CHANNEL action, the summon is the one that concentrations and can release during PHASE (6) RELEASE. The Shadebinder’s summon can benefit from their talents when using this trait. "},{"name":"COMPANION SHADE","desc":"The Shadebinder has a friendly shade. As a Minor Action, the Shadebinder can summon this shade in a free space within Scope. Choose one of the following profiles when summoned, which gives the Shadebinder a special Reaction. They can only have one shade summoned at a time. The shade keeps its current HP value when dismissed, and regains all HP during a Rest. If the shade is defeated, it can’t be resummoned unless The Shadebinder spends a Recovery, at which point it regains all its HP. (Tags: Summon, Size 1/2, 8 {HP} + your GRIT, Dodge/A-Def=10 + your GRIT, Speed 4) Dewdrop. Reaction (1/round). Trigger: An enemy adjacent to the Shade starts their turn. Effect: They are MARKED by the Shade and must pass a MGK save or lose 2 mana. Firestarter. Reaction (1/round). Trigger: An enemy adjacent to the Shade takes damage or Stress. Effect: They take [1d6 Discord] from the Shade. Vinecutter. Reaction (1/round). Trigger: An enemy within [Range 2] of the Shade starts a movement. Effect: They take [2 Stress] from the Shade and the Shade can Slide them 2 spaces."},{"name":"","desc":""}],"limit_break":{"name":"Aetheric Evolution","action":"Limit Break, (3) VOLLEY","desc":"The Shadebinder targets one of their summons within Scope, empowering them with an influx of aether. The summon is fully healed and gains the following benefits, which last until the end of the scene or the summon is defeated and remain even if the summon is dismissed. •        Size increased by +1 •        +10 current and maximum HP. •        If they didn’t have a Speed, they gain Speed 4. Otherwise, they gain +2 Speed. The summon gains the following abilities, which use the summon’s Standard Action.  Hyper Ray        Spell The summon creates a [Line 15] area. All characters in the area must make an AGI save, taking [10 Force] on a failure, or [5 Force] on a success. After using this action, the summon can’t move or take any actions during the Shadebinder’s next turn, and can’t be dismissed until the end of the Shadebinder’s next turn. Slash        Skill An adjacent enemy takes [3 Piercing Physical] and is SUNDERED until the end of their next turn. Snarl        Skill An enemy within [Range 5] is MARKED by the summon and must pass a MIND save or be WEAKENED until the end of their next turn. Recover        Skill The summon regains all of its HP, clears a condition, and gains Hard Cover until the end of the summoner’s next turn. "}},{"class":"Shadow Dancer","role":"Striker","scope":"12","HP":"8","recoveries":"3","dodge":"12","speed":"7","stress_cap":"4","memory":"5","adef":"7","mana":"4","save_target":"10","weapon_slots":["[LIGHT/LIGHT]","",""],"support_slots":["[LIGHT]","[LIGHT]","",""],"traits":[{"name":"SHADOW CLONES","desc":"Whenever the Shadow Dancer teleports, they leave a Shadow Clone in the space they left. The shadow clone is the same size as the Shadow Dancer. 1/round when the Shadow Dancer or an ally deals damage to a target adjacent to a shadow clone, the Shadow Dancer can cause the ability to deal +1d6 bonus damage. The Shadow Dancer can have an unlimited number of Shadow Clones, which last until the end of the scene or until the Shadow Dancer is defeated. Shadow Clones don’t cause obstruction and aren’t characters or objects."},{"name":"SHADOW REALM","desc":"When the Shadow Dancer teleports, they can always choose one of their Shadow Clones as the destination. This costs 1 mana to use and destroys the Shadow Clone."},{"name":"SLIP STEP","desc":"Reaction attacks against the Shadow Dancer gain +1 {DIF}. As a Minor Action while adjacent to a character, the Shadow Dancer can teleport to another space adjacent to that character. "}],"limit_break":{"name":"Eclipse","action":"Limit Break, Free Action","desc":"For the rest of the scene, the Shadow Dancer can teleport when they use their Standard Movement or the basic (4) RUSH action’s movement option, and can split up movement as normal. They can only create 1 Shadow Clone per standard movement or RUSH action. Until the end of the scene, Shadow Realm costs 0 mana."}},{"class":"Shapeshifter","role":"Support","scope":"10","HP":"8","recoveries":"4","dodge":"8","speed":"5","stress_cap":"7","memory":"5","adef":"7","mana":"4","save_target":"10","weapon_slots":["[LIGHT]","[HEAVY]",""],"support_slots":["[LIGHT]","[LIGHT]","[LIGHT]",""],"traits":[{"name":"BEAST WEAPONS","desc":"The Shapeshifter gains the following Innate weapon, which is equipped for free. It cannot be destroyed, DISARMED, or enchanted.  Beast Weapons [WEAPON, Melee] Light Club | Innate, Unique [Reach 1] [1d3 Physical] At the end of your turn, if you didn’t make an attack that turn, you can attack with this weapon once as a Free Action."},{"name":"FORM FOR THE OCCASION","desc":"The Shapeshifter moves normally in Difficult Terrain. They can fly when they move, but they take [1 Stress] at the end of a turn in which they did so. They have an Aquatic Adaptation."},{"name":"SOOTHE","desc":"When an ally within Scope consumes a MARK, the Shapeshifter can clear 1 {STRESS} from them as long as they aren’t’ STUNNED."}],"limit_break":{"name":"Perfect Form","action":"Limit Break, Free Action","desc":"The Shapeshifter can choose up to 4 of the following options. These benefits last until the end of the scene. 1/turn as a free action the Shapeshifter can reselect up to 4 options. Each option can only be selected once at a time. Adaptive Body. You gain +1 ACC on all checks and saves.  Dire Beast Weapons. Beast Weapon deals 1d6+2 damage instead. Eagle Eye. You can (3) MARK as a Minor Action. Expert Form for Every Occasion. Form for the Occasion no longer causes Stress, and the Shapeshifter can fly at any time, not just when moving. Hunter’s Eye. Gain 1 Focus at the start of your turn. Insulated Hide. Gain Resistance to Physical, Astral, Lunar, Force, Stress, or Discord from other characters. Predator Weapons. You gain +1 ACC on attack rolls. Resized. Gain a size between ½ and 4. Characters are pushed to make space for your new size. Sneaky. You can (4) HIDE as a Minor Action. Walking Wall. You count as Hard Cover for your allies. "}},{"class":"Skald","role":"Support","scope":"10","HP":"7","recoveries":"4","dodge":"8","speed":"5","stress_cap":"6","memory":"6","adef":"9","mana":"4","save_target":"11","weapon_slots":["[MAIN]","",""],"support_slots":["[LIGHT]","[MAIN]","",""],"traits":[{"name":"ENCORE","desc":"At the beginning of each round, if the Skald successfully released a (2) CHANNEL ability in the prior round, they can spend 1 mana to immediately (2) CHANNEL."},{"name":"INSPIRE","desc":"1/turn As a Free Action, the Skald can spend 1 mana to grant Inspiration to an ally within Scope. An ally can consume Inspiration to gain +1 Accuracy on an attack, check, or save. Characters can only benefit from one Inspiration at a time. Inspiration lasts until the end of the scene or until consumed."},{"name":"TEMPO","desc":"Gain the Tempo reaction."},{"name":"TEMPO","freq":"Reaction","trigger":"Trigger: An ally within Scope is missed by an attack","effect":"Effect: They can Shift 2."}],"limit_break":{"name":"BALLAD","action":"Limit Break, Free Action","desc":"The Skald begins weaving a legendary performance. When this limit break is activated and at the start of each of the Skald’s turns, pick a verse. The effects of chosen verses are applied to the Skald and all allies within their Scope. Each verse can only be chosen once. Instead of picking a verse, or when there are no more verses to select, the Skald selects a Finale. The finale affects the Skald and all allies within Scope. After the finale, the limit break ends. If the Skald is SILENCED, the effects of all verses are suppressed, and the Skald doesn’t choose any new verses or finales until the SILENCED condition is removed. Verses •Verse of Heroes. +1 Accuracy on attack rolls. •Verse of Journey. +2 Speed. •Verse of Relaxation. Gain resistance to Stress. •Verse of Teamwork. +1 Accuracy on all checks and saves. Finale •The Last Stand. Gain 1d6+4 Focus. •The Storm Fades. Regain all mana. •Legends Never Die. Regain all HP. •A New Beginning. Clear all Stress and remove all conditions.  •The New World. Each character can Shift up to their speed. "}},{"class":"Thunderclaw","role":"Striker","scope":"5","HP":"8","recoveries":"5","dodge":"10","speed":"6","stress_cap":"5","memory":"6","adef":"7","mana":"2","save_target":"10","weapon_slots":["[LIGHT/LIGHT]","[MAIN]",""],"support_slots":["[LIGHT]","[MAIN]","",""],"traits":[{"name":"BALANCE","desc":"Once during their turn, the Thunderclaw can convert any amount of Flurry to an equal amount of Focus, or vice versa."},{"name":"FAST AS LIGHTNING","desc":"As a Minor Action, the Thunderclaw can spend 1 Mana to RUSH or make an IMPROVISED ATTACK"},{"name":"FLURRY","desc":"The Thunderclaw has a Flurry Score, which starts at 0 and has a maximum of 6. Whenever the Thunderclaw hits with a melee attack, they gain +1 Flurry. 1/round when they hit with a melee attack, they can expend 1 Flurry to deal +1d6 bonus damage. 1/round when they hit with a melee attack, they can expend 6 Flurry to make a Stunning Strike, forcing one of the targets to make a BULK save. On a failure, they are STUNNED and DAZED until the end of their next turn."}],"limit_break":{"name":"LIVING LIGHTNING","action":"Limit Break, Free Action","desc":"The Thunderclaw channels lightning directly into their body, pushing them past their physical limits. The Thunderclaw immediately gains 6 Flurry. Until the end of the scene, their Fast as Lightning trait doesn’t cost mana. When they spend 6 Flurry to make a Stunning Strike, the target automatically fails the save."}},{"class":"Tidecaller","role":"Controller/Support","scope":"8","HP":"8","recoveries":"3","dodge":"6","speed":"5","stress_cap":"6","memory":"6","adef":"10","mana":"5","save_target":"12","weapon_slots":["[LIGHT]","[MAIN]",""],"support_slots":["[LIGHT]","[LIGHT]","",""],"traits":[{"name":"DOWNRIVER","desc":"As a Minor Action, the Tidecaller can spend 1 mana to create a [Line 6] zone within Scope. This is a River Current, and it lasts until the Tidecaller creates a new one, is defeated, or becomes STUNNED. The River Current suppresses the effects of any Difficult and Dangerous Terrain within its zone.  1/turn whenever an ally enters a River Current, they can choose to slide to a free space in the zone.  The Tidecaller has an Aquatic Adaptation."},{"name":"RISING TIDE","desc":"1/turn when the Tidecaller inflicts forced movement on an enemy, they can allow an ally within Scope to Shift a number of spaces equal to the number of spaces the enemy was moved. The Tidecaller can’t use this trait if they are STUNNED."},{"name":"WATER MELD","desc":"When an ally uses a River Current, the Tidecaller can spend 1 mana as a Reaction to make them INVISIBLE until the start of the ally’s next turn. If the ally is attacked while outside of the River Current, INVISIBLE ends after that attack."}],"limit_break":{"name":"Tidal Wave","action":"Limit Break, (3) SKIRMISH","desc":"A wave of water washes from one side of the map to the other. Choose one side of the map. All enemies in the scene must make a BULK save. Failure: Enemies are Pushed 6 spaces in a straight line towards the chosen side of the map, are DAZED and DISARMED until the end of their next turn, and knocked PRONE. Success: Enemies are pushed half as many spaces and are knocked PRONE.  Enemies that hit a character or obstruction when being pushed by this ability take [5 Physical] and are SUNDERED until cleared."}},{"class":"Warden","role":"Defender","scope":"5","HP":"12","recoveries":"6","dodge":"6","speed":"5","stress_cap":"6","memory":"5","adef":"8","mana":"2","save_target":"10","weapon_slots":["[MAIN]","[HEAVY]",""],"support_slots":["[LIGHT]","[LIGHT]","[MAIN]",""],"traits":[{"name":"GRASPING VINES","desc":"When an enemy starts their turn adjacent to the Warden, they can spend 1 Focus to make that enemy SLOWED until the end of their next turn. The Warden can’t use this ability if they are DISARMED, SILENCED, or STUNNED. This effect can apply after Earthen Slide if they are moved adjacent to the Warden."},{"name":"EARTHEN SLIDE","desc":"When the Warden uses INTERPOSE, if they end their movement adjacent to the attacker, the Warden can choose to make them SLOWED until the end of their next turn. Gain the earthen slide reaction."},{"name":"","desc":""},{"name":"Earthen Slide","freq":"Reaction","trigger":"Trigger: A character within your Scope starts their turn.","effect":"Effect: You can spend 1 Focus to slide them 1 space. "}],"limit_break":{"name":"Gaia`s Wrath","action":"Limit Break, Free Action","desc":"The Warden becomes an avatar of nature. They gain the following benefits, which last until the end of the scene or until they end it as a Free Action.  •        Your size increases by 1 (max of 3) and any adjacent characters are pushed to the nearest free space to accommodate your new size. •        You gain 2 Focus at the start of each of your turns.  •        When you hit a character with any attack, they are SLOWED until the end of their next turn. A character that is already SLOWED is also IMMOBILIZED until the end of their next turn."}},{"class":"Warlord","role":"Support","scope":"12","HP":"10","recoveries":"5","dodge":"7","speed":"5","stress_cap":"5","memory":"7","adef":"6","mana":"2","save_target":"10","weapon_slots":["[MAIN]","[MAIN]",""],"support_slots":["[LIGHT]","[LIGHT]","[MAIN]",""],"traits":[{"name":"FOCUSED PLAN","desc":"1/round when the Warlord makes a character MARKED, an ally of the Warlord’s choice can (3) VOLLEY or take a PHASE (5) BRAWL action against the marked character as a Reaction with +1 DIF."},{"name":"TAKE A BREATHER","desc":"When the Warlord or an ally within Scope uses (1) REFRESH, another character of the Warlord`s choice within [Range 10] of the REFRESHing character gains 1d6+1 temp HP."},{"name":"","desc":""}],"limit_break":{"name":"Follow My Lead","action":"Limit Break, Free Action","desc":"Until the end of the scene, when you use your standard action, an ally of your choice can take a standard action from that phase as a reaction. Each ally can benefit from this effect 1/scene."}}]');
	
	const wpnSlots = ["1","2","3","4","5","6","7","8"];
	wpnSlots.forEach(function (num){
		on("change:slots"+num, function(v){
			console.log("changing stuff in slot "+ num);
			
			let weapon_data = starting_weapons_data.find(x => x.name.toUpperCase().replace(/\s+/g, '') === v.newValue.toUpperCase().replace(/\s+/g, ''));
			if (!weapon_data){
				console.log("Found nothing");
				return;
			}
			
			let tag_string = "";

			for (i in weapon_data.tags){
				let wp_tag_data = tags_data.find(x => x.id === weapon_data.tags[i].id);
				let stringy = wp_tag_data.name;
				if ('val' in weapon_data.tags[i])
				{
					stringy = stringy.replace("{VAL}", weapon_data.tags[i].val)
				}
				if (i > 0){
					stringy = ", " + stringy;
				}
				tag_string += stringy;
			}
			setAttrs({
				["attackrange"+ num]: weapon_data.range[0].val+" "+weapon_data.range[0].type,
				["attacktype"+ num]: weapon_data.size+" "+weapon_data.type,
				["attackdamage"+ num]: weapon_data.damage[0].val + " " + weapon_data.damage[0].type,
				["damagetype"+ num]: weapon_data.damage[0].type,
				["attacktags"+ num]: tag_string
			});
		
		});
	});

	
    on("change:bulk change:agility change:mind change:magic change:grit", function(v) {
        
        const source_attribute = v.sourceAttribute;
        const previous_value = parseInt(v.previousValue);
        const new_value = parseInt(v.newValue);

        switch (v.sourceAttribute) {
            
            case "bulk":
                getAttrs(["hp", "hp_max", "grit", "recoveries", "recoveries_max"], function(t) {

                    const current_hp = parseInt(t.hp);
                    const current_grit = parseInt(t.grit);

                    const hp_modifier = Math.floor(new_value * 2) + current_grit;
                    const total_hp_max = current_hp + hp_modifier;

                    setAttrs({ hp_max: total_hp_max});

                    const current_recoveries = parseInt(t.recoveries);
                    const recoveries_modifier = Math.floor(new_value / 2);
                    const new_recoveries_max = current_recoveries + recoveries_modifier;

                    setAttrs({recoveries_max: new_recoveries_max});
                });
            break;

            case "agility":
                getAttrs(["dodge", "dodge_max", "speed", "speed_max"], function(t) {

                    const current_dodge = parseInt(t.dodge);
                    const dodge_modifier = new_value;
                    const total_dodge_max = current_dodge + dodge_modifier;

                    setAttrs({dodge_max: total_dodge_max});

                    const current_speed = parseInt(t.speed);
                    const speed_modifier = Math.floor(new_value / 2);
                    const total_speed_max = current_speed + speed_modifier;

                    setAttrs({speed_max: total_speed_max});
                });
            break;

            case "mind":
            getAttrs(["stress", "stress_max", "grit", "memory", "memory_max"], function(t) {

                const current_stress = parseInt(t.stress);

                const stress_modifier = new_value;
                const total_stress_max = current_stress + stress_modifier;

                setAttrs({stress_max: total_stress_max});

                const current_memory = parseInt(t.memory);
                const current_grit = parseInt(t.grit);

                const memory_modifier = Math.floor(new_value / 2) + current_grit;
                const new_memory_max = current_memory + memory_modifier;

                setAttrs({memory_max: new_memory_max});
            });
        break;

        case "magic":
        getAttrs(["dodge", "dodge_max", "speed", "speed_max"], function(t) {

            const current_dodge = parseInt(t.dodge);
            const dodge_modifier = new_value;
            const total_dodge_max = current_dodge + dodge_modifier;

            setAttrs({dodge_max: total_dodge_max});

            const current_speed = parseInt(t.speed);
            const speed_modifier = Math.floor(new_value / 2);
            const total_speed_max = current_speed + speed_modifier;

            setAttrs({speed_max: total_speed_max});
        });
    break;

            case "grit":
                 getAttrs(["hp", "hp_max", "bulk", "memory", "memory_max", "mind", "save", "save_max"], function(t) {

                const current_hp = parseInt(t.hp);
                const current_hp_max = parseInt(t.hp_max);
                const current_bulk = parseInt(t.bulk);

                const hp_modifier = ((current_bulk * 2) + new_value);

                const total_hp_max = current_hp + hp_modifier;

                setAttrs({ hp_max: total_hp_max});

                const current_memory = parseInt(t.memory);
                const current_memory_max = parseInt(t.memory_max);
                const current_mind = parseInt(t.mind);

                const memory_modifier = Math.floor(current_mind / 2) + new_value;
                const total_memory_max = current_memory + memory_modifier;

                setAttrs({ memory_max: total_memory_max});

                const current_save = parseInt(t.save);
                const total_save_max = current_save + new_value;

                setAttrs({ save_max: total_save_max});

            });
        break;

            default:
            }
        });  

        
    const buttonlist = ["character","npc","gen",];
    buttonlist.forEach(button => {
    on(`clicked:${button}`, function() {
        setAttrs({
            sheetTab: button
            });
        });
    });
 
    on('clicked:reset', () => {
        setAttrs({
            reroll1: 0,
            reroll2: 0,
            reroll3: 0,
            counter1: 0,
            opp1: 0
        });
    });
 
 
    on("sheet:opened", function(v) {
        console.log("Sheet Opened");
    });
 
    on("change:job", function(v) {  
 
        console.log("Job Change: " + v.newValue)
 
		let new_class_data = class_data.find(x => x.class.toUpperCase().replace(/\s+/g, '') === v.newValue.toUpperCase().replace(/\s+/g, ''));
		if (!new_class_data){
			console.log("Found nothing");
			return;
		}

		let tag_string = "";
		console.log("User Changed Job to '%s'", new_class_data.class);
		setAttrs( { scope:new_class_data.scope, hp:new_class_data.HP, hp_max:new_class_data.HP, recoveries:new_class_data.recoveries, recoveries_max:new_class_data.recoveries, dodge:new_class_data.dodge, dodge_max:new_class_data.dodge, speed:new_class_data.speed, speed_max:new_class_data.speed, save:new_class_data.save_target, save_max:new_class_data.save_target, stress:new_class_data.stress_cap, stress_max:new_class_data.stress_cap, memory:new_class_data.memory, memory_max:new_class_data.memory, a_def:new_class_data.adef, mana:new_class_data.mana, mana_max:new_class_data.mana});
		setAttrs( { job_trait1:new_class_data.traits[0].name, job_trait1_info: new_class_data.traits[0].desc});
		setAttrs( { job_trait2:new_class_data.traits[1].name, job_trait2_info: new_class_data.traits[1].desc});
		setAttrs( { job_trait3:new_class_data.traits[2].name, job_trait3_info: new_class_data.traits[2].desc});
		setAttrs( { lb_name:new_class_data.limit_break.name, lb_info: new_class_data.limit_break.desc});


	}) 
            
</script>